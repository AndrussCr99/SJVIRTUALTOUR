var w=window,d=document,a0="getElementById",a1="getElementsByTagName",a2="createElement",a3="appendChild",a4="documentElement",a5="getAttribute",a6="addEventListener",a7="removeEventListener",a8="clientHeight",a9="clientWidth";w.br=function(a){this._buffer=a;this._pos=0};w.br.prototype={readInt8:function(){return this._decodeInt(8,true)},readUInt8:function(){return this._decodeInt(8,false)},seek:function(a){this._pos=a;this._checkSize(0)},getPosition:function(){return this._pos},getSize:function(){return this._buffer.length},_decodeInt:function(e,f){var c=this._readBits(0,e,e/8),b=Math.pow(2,e);var a=f&&c>=b/2?c-b:c;this._pos+=e/8;return a},_shl:function(e,c){for(++c;--c;e=((e%=2147483647+1)&1073741824)==1073741824?e*2:(e-1073741824)*2+2147483647+1){}return e},_readByte:function(b,a){return this._buffer.charCodeAt(this._pos+a-b-1)&255},_readBits:function(b,c,j){var e=(b+c)%8;var f=b%8;var a=j-(b>>3)-1;var i=j+(-(b+c)>>3);var h=a-i;var g=(this._readByte(a,j)>>f)&((1<<(h?8-f:c))-1);if(h&&e){g+=(this._readByte(i++,j)&((1<<e)-1))<<(h--<<3)-f}while(h){g+=this._shl(this._readByte(i++,j),(h--<<3)-f)}return g},_checkSize:function(a){if(!(this._pos+Math.ceil(a/8)<this._buffer.length)){throw new Error("Index out of bound")}}};w.cd={};w.cd.a=function(b){var a=new XMLHttpRequest();a.open("GET",b,false);if(!("overrideMimeType" in a)){alert("Your browser does not support binary encoding, aborting ...");throw new Error()}a.overrideMimeType("text/plain; charset=x-user-defined");a.send(null);var c=a.responseText;if(c){w.cd.b(c)}else{}};w.cd.dexToHex=function(a){if(a<10){return(a+"")}else{switch(a){case 10:return"A";break;case 11:return"B";break;case 12:return"C";break;case 13:return"D";break;case 14:return"E";break;case 15:return"F";break}}};w.cd.b=function(f){if(f.length===7){alert("Your browser does not support binary encoding, aborting ...");throw new Error()}else{var m=new br(f);var l=[16,19,17,7,20,13,23,1,24,8,6,18,0,15,2,21,9,14,3,10,5,12,25,4,22,11];var t="";var c="";var q="";var e=m.getSize();var r=e-26;var s=[];if(r>0){for(var k=0;k<r;k+=26){var o=[];for(var h=0;h<26;h++){o[h]=m.readUInt8()}for(var h=0;h<26;h++){s[k+h]=o[l[h]]}}r=m.getPosition();var a=e-r-1;if(a>0){for(var h=0;h<a;h++){s[r+h]=m.readUInt8()}}}for(var n=0;n<s.length;n++){var p=s[n];if(c.length==0){if(p<128){q=3}else{if(p>=192&&p<224){q=6}else{if(p>=224&&p<240){q=9}else{q=12}}}}c+=("%"+w.cd.dexToHex(Math.floor(p/16))+w.cd.dexToHex(p%16));if(c.length==q){t+=decodeURIComponent(c);c=""}}var g=new DOMParser();var b=g.parseFromString(t,"text/xml");if(b){w.ps.xml.a(b)}}};w.c={};w.c.hc=function(b,c){var a=Array.prototype.slice.call(arguments,2);return function(e){if(e){a.push(e)}return c.apply(b,a)}};w.c.intn=function(a,b){var c=b;if(!(isNaN(a))){c=parseInt(a)}return c};w.c.b={init:function(){var a=w.navigator.userAgent.toLowerCase();if(a.indexOf("applewebkit")>0){if(a.indexOf("chrome")>0){w.c.b.b="chrome";w.c.b.e="pc"}else{w.c.b.b="safari";if(a.indexOf("ipad")>0){w.c.b.e="ipad"}else{if(a.indexOf("iphone")>0||a.indexOf("ipod")>0){w.c.b.e="iphone"}else{w.c.b.e="pc"}}}}else{if(a.indexOf("firefox")>0){w.c.b.e="pc"}else{if(a.indexOf("msie")>0){}else{}}}}};w.c.b.init();w.c.sh=function(){w.scrollTo(0,1)};w.c.gs=function(a,b){return a.currentStyle?a.currentStyle[b]:d.defaultView.getComputedStyle(a,false)[b]};w.c.d=function(){w.a0=null;w.a1=null;w.a2=null;w.a3=null;w.a4=null;w.a5=null;w.a6=null;w.a7=null;w.b=null;w.cd=null;w.d=null;w.gs=null;w.hs=null;w.m=null;w.p=null;w.ps=null;w.rd=null;w.wg=null;w.oScene=null};w.c.e={};w.c.e.se=function(a){a.preventDefault();a.stopPropagation()};w.c.e.changeScene=function(a){w.p.stop();w.hs.e.changeScene(a)};w.c.e.stop=function(){w.p.stop()};w.c.e.up=function(){w.p.stop();w.p.up()};w.c.e.down=function(){w.p.stop();w.p.down()};w.c.e.left=function(){w.p.stop();w.p.left()};w.c.e.right=function(){w.p.stop();w.p.right()};w.c.e.zoomin=function(){w.p.stop();w.p.zoomin()};w.c.e.zoomout=function(){w.p.stop();w.p.zoomout()};w.c.e.previousScene=function(){w.p.stop();var c=0;var a=null;for(var b=0;b<w.gs.scenes.length;b++){if(w.gs.scenes[b].id==w.cs.id){c=b;break}}if(c==0){a=w.gs.scenes[(w.gs.scenes.length-1)]}else{a=w.gs.scenes[(b-1)]}w.hs.e.changeScene({id:a.id})};w.c.e.nextScene=function(){w.p.stop();var c=0;var a=null;for(var b=0;b<w.gs.scenes.length;b++){if(w.gs.scenes[b].id==w.cs.id){c=b;break}}if(c==(w.gs.scenes.length-1)){a=w.gs.scenes[0]}else{a=w.gs.scenes[(b+1)]}w.hs.e.changeScene({id:a.id})};w.c.e.toggle=function(b){w.p.stop();var a=b.clickFunc.split("|");if(w.p.sta==a[0]){w.p.stop();w.p.sta=a[1]}else{w.p.start();w.p.sta=a[0]}};w.c.e.popWindow=function(a){w.wg.pw.display(a)};w.c.e.hidePopWindow=function(b){for(__ in w.widget.content){var a=w.widget.content[__];if(b.id==__){(function(){return a.hideAminateFunc.apply(a,[parseInt(b.fxtype),parseInt(b.duration),parseInt(b.fxeffect)])})()}}};w.c.f=function(g){var e={ROOT_TAG:/^body|html$/i,OP_SCROLL:/^(?:inline|table-row)$/i},i=null,h=g.offsetTop,j=g.offsetLeft,a=g.offsetWidth,c=g.offsetHeight,b=g.offsetParent;if(b!=g){while(b){j+=b.offsetLeft;h+=b.offsetTop;if(b.tagName.toLowerCase()=="body"){i=b.ownerDocument.defaultView}b=b.offsetParent}}b=g.parentNode;while(b.tagName&&!e.ROOT_TAG.test(b.tagName)){if(b.scrollTop||b.scrollLeft){if(!e.OP_SCROLL.test(b.style.display)){if(!isOP||b.style.overflow!=="visible"){j-=b.scrollLeft;h-=b.scrollTop}}}b=b.parentNode}var f=w.c.g(i);j-=f.left;h-=f.top;a+=j;c+=h;return{left:j,top:h,right:a,bottom:c}};w.c.g=function(b){b=b||window;var e=b.document,a=e.documentElement,c=e.body;e=(a&&a.scrollTop!=null&&(a.scrollTop>c.scrollTop||a.scrollLeft>c.scrollLeft))?a:c;return{top:e.scrollTop,left:e.scrollLeft}};w.cs=null;w.gs={scenes:[],bgColor:"#999"};function oScene(){this.camera={cp:0,ct:0,cf:70,tf:70,vw:320,vh:240};this.scene={ip:0,np:0,xp:360,it:0,nt:-90,xt:90,iz:70,nz:5,xz:120};this.images={common:"",cylinder:"",front:"",backend:"",left:"",right:"",top:"",bottom:""};this.control={isMDorTD:false,lockedwheel:false,mode:false,speed:"normal",renderNum:-1,ini_x:0,ini_y:0,ics_dx:0,ics_dy:0,keycode:0};this.type="cube";this.preImage="";this.speed="normal";this.hotspots=[];this.mapid=null;this.radar=null}oScene.prototype={hotspot:[]};w.p={};w.p.isInit=false;w.p.panel={image:d[a2]("img"),cube:[],cylinder:[],common:{type:{}}};w.p.lastStuff={image:d[a2]("img"),pano:[]};w.p.sta=null;w.p.init=function(a){var b=d[a2]("div");b.style.top=0+"px";b.style.left=0+"px";b.style.position="absolute";w.p.target=b;if(w.p.zindex){b.style.zIndex=parseInt(w.p.zindex)}w.twmc[a3](w.p.target);w.p.isInit=true;c();function c(){w.p.ap=false;w.cs=w.gs.scenes[0];if(w.cs){w.p.idis();w.p.ah();w.p.ipp();w.p.ipo();w.wg.pb.a(a);var e=[];w.wg.pb.f=true;if(w.twToolBar){w.wg.cb1.a()}if(w.p.type=="mainwindow"){if(w.cs.type=="cube"){e.push(w.cs.images.right);e.push(w.cs.images.front);e.push(w.cs.images.left);e.push(w.cs.images.backend);e.push(w.cs.images.top);e.push(w.cs.images.bottom)}else{if(w.cs.type=="cylinder"){e.push(w.cs.images.cylinder)}else{if(w.cs.type=="common"){e.push(w.cs.images.common)}}}w.wg.pb.b({img:w.cs.preImage,imgs:e,type:w.cs.type,con:w.p.dd,mapstatus:true})}w.c.sh()}else{setTimeout(c,500)}}};w.p.da=null;w.p.db=null;w.p.dc=null;w.p.dd=null;w.p.de=d[a2]("div");w.p.dimage=d[a2]("div");w.p.dimage.style.height="100%";w.p.dimage.style.width="100%";w.p.orz=function(){if(w.p.type){w.p.vs(w.p.target.offsetWidth,w.p.target.offsetHeight)}};w.p.cptf=function(){var f;var g;var h;if(w.cs.camera.cf<w.cs.scene.nz){w.cs.camera.cf=w.cs.scene.nz}if(w.cs.camera.cf>w.cs.scene.xz){w.cs.camera.cf=w.cs.scene.xz}g=w.cs.camera.cf/2;f=Math.atan(w.cs.camera.vw/w.cs.camera.vh*Math.tan(g*Math.PI/180))*180/Math.PI;if(g*2>w.cs.scene.xt-w.cs.scene.nt){g=(w.cs.scene.xt-w.cs.scene.nt)/2}w.cs.camera.cf=g*2;if(w.cs.scene.xt<90){if(w.cs.camera.ct+g>w.cs.scene.xt){w.cs.camera.ct=w.cs.scene.xt-g}}else{if(w.cs.camera.ct>w.cs.scene.xt){w.cs.camera.ct=w.cs.scene.xt}}if(w.cs.scene.nt>-90){if(w.cs.camera.ct-g<w.cs.scene.nt){w.cs.camera.ct=w.cs.scene.nt+g}}else{if(w.cs.camera.ct<w.cs.scene.nt){w.cs.camera.ct=w.cs.scene.nt}}if(w.cs.scene.xp-w.cs.scene.np<359.99){var j=0;if(w.cs.camera.ct!=0){var a,c;var e=w.cs.camera.vw/2;var i=w.cs.camera.vh/2;a=e*Math.tan(f*Math.PI/180);c=i*Math.tan(g*Math.PI/180);var b=i/Math.tan(Math.abs(w.cs.camera.ct)*Math.PI/180);b-=c;if(b>0){j=Math.atan(1/(b/c))*180/Math.PI;j=j*(w.cs.scene.xp-w.cs.scene.np)/360}}if(w.cs.camera.cp+(f+j)>w.cs.scene.xp){w.cs.camera.cp=w.cs.scene.xp-(f+j)}if(w.cs.camera.cp-(f+j)<w.cs.scene.np){w.cs.camera.cp=w.cs.scene.np+(f+j)}if(w.cs.camera.ct+g>90){w.cs.camera.ct=90-g}if(w.cs.camera.ct-g<-90){w.cs.camera.ct=-90+g}}};w.p.ins=function(a,b){w.cs.control.ini_x=a;w.cs.control.ini_y=b};w.p.upt=function(a,c){var b=w.cs.camera.cf;w.cs.camera.cp-=a*b/w.cs.camera.vw;w.cs.camera.ct+=c*b/w.cs.camera.vh;w.p.cptf()};w.p.inm=function(a,b){w.cs.control.ics_dx=a-w.cs.control.ini_x;w.cs.control.ics_dy=b-w.cs.control.ini_y;if(w.cs.control.mode){w.p.upt(w.cs.control.ics_dx,w.cs.control.ics_dy);w.cs.control.ini_x=a;w.cs.control.ini_y=b;w.cs.control.ics_dx=0;w.cs.control.ics_dy=0;w.p.opt()}else{w.cs.control.ics_dx=-w.cs.control.ics_dx*0.1;w.cs.control.ics_dy=-w.cs.control.ics_dy*0.1}};w.p.md=function(a){if(!w.cs.control.isMDorTD){w.p.stop();a=a?a:w.event;a.preventDefault();if(a.which||a.which==0||a.which==1){if(a.target==w.p.objHandler){if(w.cs.type!="common"){w.p.ins(a.pageX,a.pageY)}else{w.p.csc.sx=a.pageX;w.p.csc.sy=a.pageY}w.cs.control.renderNum=1}}}};w.p.mm=function(a){if(!w.cs.control.isMDorTD){a=a?a:w.event;a.preventDefault();if(w.cs.control.renderNum>0){if(a.which||a.which==0||a.which==1){if(w.cs.type!="common"){w.p.inm(a.pageX,a.pageY)}else{w.p.csc.dndFunc(a.pageX,a.pageY)}}}}};w.p.mu=function(a){if(!w.cs.control.isMDorTD){a=a?a:w.event;a.preventDefault();if(w.cs.control.renderNum>0){w.cs.control.renderNum=-1}}};w.p.mw=function(b){if(!w.cs.control.lockedwheel){b=b?b:w.event;var a=b.detail?b.detail*-1:b.wheelDelta/40;if(w.cs.type!="common"){w.cs.camera.cf+=a>0?1:-1;w.p.opt()}else{w.p.csc.changeSize(a)}b.preventDefault()}};w.p.ts=function(c){var a=c;if(!w.cs.control.isMDorTD){w.p.stop();w.p.sta="stop";if(!c){a=w.event}a.preventDefault();var b=a.changedTouches;if(w.cs.control.renderNum<=0&&b[0]){w.cs.control.ini_x=b[0].pageX;w.cs.control.ini_y=b[0].pageY;w.p.touchTarget=b[0].target;if(b[0].target==w.p.objHandler){w.p.ins(b[0].pageX,b[0].pageY);w.cs.control.renderNum=b[0].identifier}w.p.csc.sx=b[0].pageX;w.p.csc.sy=b[0].pageY;if(w.p.touchTarget){a=w.p.touchTarget;JJ=false;while(a&&a!=w.p.objHandler){if(a.onmouseover){a.onmouseover()}if(a.onmousedown&&!JJ){a.onmousedown();JJ=true}a=a.parentNode}}}}};w.p.tm=function(c){if(!w.cs.control.isMDorTD){var b=c.changedTouches;c.preventDefault();if(w.cs.control.renderNum>0){c.preventDefault();for(var a=0;a<b.length;a++){if(b[a].identifier==w.cs.control.renderNum){w.p.inm(b[a].clientX,b[a].clientY);if(w.cs.type!="common"){w.p.inm(b[a].clientX,b[a].clientY)}else{w.p.csc.dndFunc(b[a].clientX,b[a].clientY)}break}}}}};w.p.te=function(a){if(!w.cs.control.isMDorTD){a.preventDefault();if(w.p.touchTarget){a=w.p.touchTarget;JJ=false;while(a&&a!=w.p.objHandler){if(a.onmouseout){a.onmouseout()}if(a.onmouseup&&!JJ){a.onmouseup();JJ=true}a=a.parentNode}}w.p.touchTarget=null;w.cs.control.renderNum=-1}};w.p.tc=function(a){if(!w.cs.control.isMDorTD){a.preventDefault();w.cs.control.renderNum=-1}};w.p.gs=function(a){if(!w.cs.control.isMDorTD){a.preventDefault();w.cs.camera.tf=w.cs.camera.cf}};w.p.gc=function(a){if(!w.cs.control.isMDorTD){a.preventDefault();if(w.cs.type!="common"){w.cs.camera.cf=w.cs.camera.tf/Math.sqrt(event.scale)}else{w.p.csc.changeSize((a.scale-1))}}};w.p.ge=function(a){if(!w.cs.control.isMDorTD){a.preventDefault()}};w.p.kd=function(a){w.cs.control.keycode=a.keyCode};w.p.ku=function(a){w.cs.control.keycode=0};w.p.obl=function(a){w.cs.control.keycode=0};w.p.ef=function(){if(w.cs.control.renderNum>-1){if(!w.cs.control.mode){w.p.upt(w.cs.control.ics_dx,w.cs.control.ics_dy);w.p.isRender=true}}if(w.cs.control.renderNum==-1&&(w.cs.control.ics_dx!=0||w.cs.control.ics_dy!=0)){w.cs.control.ics_dx=0.9*w.cs.control.ics_dx;w.cs.control.ics_dy=0.9*w.cs.control.ics_dy;if(w.cs.control.ics_dx*w.cs.control.ics_dx+w.cs.control.ics_dy*w.cs.control.ics_dy<0.1){w.cs.control.ics_dx=0;w.cs.control.ics_dy=0}else{w.p.upt(w.cs.control.ics_dx,w.cs.control.ics_dy);w.p.isRender=true}}if(w.cs.control.keycode!=0){var a=5;switch(w.cs.control.keycode){case 120:switch(w.cs.control.speed){case"slow":a=-2;break;case"fast":a=-10;break;default:a=-5;break}w.p.upt(a,0);break;case 37:w.p.upt(5,0);break;case 38:w.p.upt(0,2);break;case 39:w.p.upt(-5,0);break;case 40:w.p.upt(0,-2);break;case 43:case 107:case 16:w.cs.camera.cf=w.cs.camera.cf-0.5;break;case 17:case 18:case 109:case 45:case 91:w.cs.camera.cf=w.cs.camera.cf+0.5;break;default:}w.p.isRender=true}while(w.cs.camera.cp>360){w.cs.camera.cp-=360}while(w.cs.camera.cp<0){w.cs.camera.cp+=360}if(w.p.isRender){w.p.isRender=false;w.p.opt()}setTimeout(w.p.ef,20)};w.p.oc=function(){setTimeout(function(){w.p.fs(false)},10);setTimeout(function(){w.p.fs(false)},100)};w.p.objHandler=null;w.p.isFullScreen=false;w.p.isRender=false;w.p.fl=function(){return w.cs.camera.vh*1/(2*Math.tan(Math.PI/180*(w.cs.camera.cf/2)))};w.p.vs=function(a,b){if(w.p.isFullScreen){a=w.twmc.clientWidth;b=w.twmc.clientWidth}w.p.db.style.width=a+"px";w.p.db.style.height=b+"px";w.cs.camera.vw=a;w.cs.camera.vh=b;w.p.opt()};w.p.opt=function(){w.p.isRender=false;w.p.cptf();var a=false;if(w.cs.camera.vw!=w.p.db.offsetWidth||w.cs.camera.vh!=w.p.db.offsetHeight){w.cs.camera.vw=parseInt(w.p.db.offsetWidth);w.cs.camera.vh=parseInt(w.p.db.offsetHeight);w.p.db.style.webkitTransformOriginX=w.cs.camera.vw/2+"px";w.p.db.style.webkitTransformOriginY=w.cs.camera.vh/2+"px";a=true}var c=Math.round(w.p.fl());if(w.p.focalLength!=c){a=true;w.p.focalLength=c}if(a){w.p.db.style.webkitPerspective=c;if(w.p.dc){w.p.dc.style.webkitTransform="translate3d("+w.cs.camera.vw/2+"px,"+w.cs.camera.vh/2+"px,"+c+"px)"}}if(w.p.dd){w.p.dd.style.webkitTransform="rotateX("+Number(w.cs.camera.ct).toFixed(10)+"deg)  rotateY("+Number(w.cs.camera.cp).toFixed(10)+"deg)"}var e=0;for(var b=0;b<w.cs.hotspots.length;b++){w.hs.b(w.cs.hotspots[e++])}w.rd.b(w.cs)};w.p.ah=function(){var a;a=w.p.de;w.p.objHandler=a;w.p.oc();setTimeout(function(){w.p.ef()},10);setTimeout(function(){w.p.orz();w.p.opt()},10);if(a[a6]){if(w.c.b.e=="pc"){a[a6]("mousedown",w.p.md,false);a[a6]("mousemove",w.p.mm,false);d[a6]("mouseup",w.p.mu,false);a[a6]("mousewheel",w.p.mw,false);d[a6]("keydown",w.p.kd,false);d[a6]("keyup",w.p.ku,false)}else{a[a6]("touchstart",w.p.ts,false);a[a6]("touchmove",w.p.tm,false);a[a6]("touchend",w.p.te,false);a[a6]("touchcancel",w.p.tc,false);a[a6]("gesturestart",w.p.gs,false);a[a6]("gesturechange",w.p.gc,false);a[a6]("gestureend",w.p.ge,false);w[a6]("orientationchange",w.p.oc,false)}w[a6]("resize",w.p.orz,false);w[a6]("blur",w.p.obl,false)}};w.p.fs=function(c){if(w.p.isFullScreen!=c){w.p.isFullScreen=c;w.p.isRender=true}if(w.p.isFullScreen){w.p.da.style.position="absolute";var a=0;var b=0;var e=w.p.db;if(w.p.dviewer.offsetParent){do{a+=w.p.dviewer.offsetLeft;b+=w.p.dviewer.offsetTop}while(w.p.dviewer=w.p.dviewer.offsetParent)}w.p.da.style.left=w.pageXOffset-a+"px";w.p.da.style.top=w.pageYOffset-b+"px"}else{w.p.da.style.position="relative";w.p.da.style.left="0px";w.p.da.style.top="0px"}w.p.orz()};w.p.tfs=function(){w.p.fs(!w.p.isFullScreen)};w.p.idis=function(){w.p.da=d[a2]("div");var b=w.p.da;b.id="sceneviewer";b.style.top="0px";b.style.left="0px";b.style.position="relative";b.style.zIndex=0;b.style.height=w.gs.height;b.style.width=w.gs.width;w.p.target[a3](b);w.p.db=d[a2]("div");var a=w.p.db;a.id="viewer";a.style.top="0px";a.style.left="0px";a.style.overflow="hidden";a.style.position="absolute";a.style.zIndex=1;a.style.webkitUserSelect="none";b[a3](a);var e=w.p.de;w.p.de.id="Hotspots";e.style.position="absolute";e.style.top="0px";e.style.left="0px";e.style.overflow="hidden";e.style.zIndex=2;e.style.wevkitUserSelect="none";b[a3](e);var c=w.p.dimage;w.p.dimage.id="DivCommonImage";c.style.position="absolute";c.style.top="0px";c.style.left="0px";c.style.overflow="hidden";c.style.zIndex=1;c.style.wevkitUserSelect="none";b[a3](c)};w.p.ipo=function(){w.p.dc=d[a2]("div");var b=w.p.dc;b.style.position="absolute";b.style.webkitUserSelect="none";b.style.webkitTransformStyle="preserve-3d";b.style.zIndex="100";w.p.db[a3](b);w.p.dd=d[a2]("div");var a=w.p.dd;a.style.webkitTransformStyle="preserve-3d";a.style.webkitTransformOrigin="0px 0px";a.style.webkitUserSelect="none";a.style.zIndex="100";b[a3](a)};w.p.rdp=function(){if(w.p.dc){w.p.db.removeChild(w.p.dc);w.p.dd=null;w.p.dc=null}};w.p.left=function(){w.cs.control.keycode=37};w.p.right=function(){w.cs.control.keycode=39};w.p.up=function(){w.cs.control.keycode=38};w.p.down=function(){w.cs.control.keycode=40};w.p.zoomin=function(){w.cs.control.keycode=16};w.p.zoomout=function(){w.cs.control.keycode=17};w.p.stop=function(){if(w.cs){w.cs.control.keycode=0;clearTimeout(w.p.amh);if(w.p.ap){w.wg.mv.stopPlay()}}};w.p.start=function(){w.cs.control.keycode=120};w.p.reset=function(){w.cs.camera.cp=w.cs.scene.ip;w.cs.camera.ct=w.cs.scene.it;w.cs.camera.cf=w.cs.scene.iz;w.p.opt()};w.p.changemode=function(){w.cs.control.mode=!w.cs.control.mode};w.p.ipp=function(f){for(var c=0;c<6;c++){var g=d[a2]("canvas");var e=g.getContext("2d");g.style.position="absolute";g.style.top="0px";g.style.left="0px";g.height="128px";g.width="128px";g.style.webkitTransformOriginX="0";g.style.webkitTransformOriginY="0";g.style.webkitBackfaceVisibility="hidden";g.style.webkitUserSelect="none";if(c<4){g.style.webkitTransform="rotateY("+c*-90+"deg) translate3d(-64.0px,-64.0px,-64.0px)"}else{g.style.webkitTransform="rotateX("+(c==4?-90:90)+"deg) translate3d(-64.0px,-64.0px,-64.0px)"}w.p.panel.cube.push(g)}for(var c=0;c<72;c++){var g=d[a2]("canvas");var e=g.getContext("2d");g.style.position="absolute";g.style.top="0px";g.style.left="0px";g.style.webkitTransformOriginX="0";g.style.webkitTransformOriginY="0";g.style.webkitTransformOriginZ="0";g.style.webkitBackfaceVisibility="hidden";g.style.webkitUserSelect="none";w.p.panel.cylinder.push(g)}var b=d[a2]("canvas");var a=b.getContext("2d");b.style.position="absolute";b.style.webKitUserSelect="none";w.p.panel.common.canvas=b};w.p.amh=null;w.p.autoPlay=function(a){if(w.p.ap===false){if(w.p.amh){clearTimeout(w.p.amh)}if(a=="1"){w.cs.camera.cp=parseFloat(w.cs.camera.cp)+0.5}else{w.cs.camera.cp=parseFloat(w.cs.camera.cp)-0.5}if(w.cs.camera.cp>360){w.cs.camera.cp=0}w.p.opt();w.p.amh=setTimeout(w.c.hc(this,w.p.autoPlay,a),50)}else{clearTimeout(w.p.amh)}};w.p.csc={};w.p.csc.dnd=false;w.p.csc.scale=false;w.p.csc.sx=0;w.p.csc.sy=0;w.p.csc.resizePosition=function(a){if(a.height>w.twmc.clientHeight){w.p.csc.dnd=true;w.p.csc.scale=true}if(a.width>w.twmc.clientWidth){w.p.csc.dnd=true;w.p.csc.scale=true}a.style.top=Math.round((w.twmc.clientHeight-a.height)/2)+"px";a.style.left=Math.round((w.twmc.clientWidth-a.width)/2)+"px"};w.p.csc.dndFunc=function(c,b){if(w.p.csc.dnd){var a=w.p.panel.common.canvas;var h=(parseInt(a.style.top)+(b-w.p.csc.sy));var f=(parseInt(a.style.left)+(c-w.p.csc.sx));var g=(w.twmc[a8]-a.height);var e=(w.twmc[a9]-a.width);if(g>0){}else{if(h>0){a.style.top=0+"px"}else{if(h<g){a.style.top=g+"px"}else{a.style.top=h+"px"}}}if(e>0){}else{if(f>0){a.style.left=0+"px"}else{if(f<e){a.style.left=e+"px"}else{a.style.left=f+"px"}}}w.p.csc.sx=c;w.p.csc.sy=b}};w.p.csc.changeSize=function(k){var l=w.p.panel.common.canvas;var a=parseInt(l.width)/parseInt(l.height);var g=w.p.panel.image;var f=g.height;var m=g.width;var n=w.p.panel.common.canvas.getContext("2d");if(k>0){w.p.panel.common.scale=parseFloat(w.p.panel.common.scale)+0.01}else{w.p.panel.common.scale=parseFloat(w.p.panel.common.scale)-0.01}if(parseFloat(w.p.panel.common.scale)>1.5){w.p.panel.common.scale=1.5;w.p.csc.scale=false}else{if(parseFloat(w.p.panel.common.scale)<0.5){w.p.panel.common.scale=0.5;w.p.csc.scale=false}else{w.p.csc.scale=true}}if(w.p.csc.scale){f=parseInt(f)*parseFloat(w.p.panel.common.scale);m=parseInt(m)*parseFloat(w.p.panel.common.scale);var c=parseInt(l.height)-f;var j=parseInt(l.width)-m;var b=parseInt(l.style.top)+c/2;var h=parseInt(l.style.left)+j/2;if((m>w.twmc.clientWidth)&&(f>w.twmc.clientHeight)){w.p.csc.dnd=true;l.height=f;l.width=m;if(b>0){l.style.top="0px"}else{if((w.twmc.clientHeight-l.height)<b){l.style.top=b+"px"}else{l.style.top=(w.twmc.clientHeight-l.height)+"px"}}if(h>0){l.style.left="0px"}else{if((w.twmc.clientWidth-l.width)<h){l.style.left=h+"px"}else{l.style.left=(w.twmc.clientWidth-l.width)+"px"}}}else{l.height=f;l.width=m;if((m>w.twmc.clientWidth)||(f>w.twmc.clientHeight)){w.p.csc.dnd=true;if(m>w.twmc.clientWidth){if(h>0){l.style.left="0px"}else{if((w.twmc.clientWidth-l.width)<h){l.style.left=h+"px"}else{l.style.left=(w.twmc.clientWidth-l.width)+"px"}}l.style.top=Math.round((w.twmc.clientHeight-l.height)/2)+"px"}else{if(b>0){l.style.top="0px"}else{if((w.twmc.clientHeight-l.height)<b){l.style.top=b+"px"}else{l.style.top=(w.twmc.clientHeight-l.height)+"px"}}l.style.left=Math.round((w.twmc.clientWidth-l.width)/2)+"px"}}else{w.p.csc.dnd=false;l.style.top=Math.round((w.twmc.clientHeight-l.height)/2)+"px";l.style.left=Math.round((w.twmc.clientWidth-l.width)/2)+"px"}}n.drawImage(g,0,0,g.width,g.height,0,0,l.width,l.height);for(var e=0;e<w.cs.hotspots.length;e++){w.hs.b(w.cs.hotspots[e])}}};w.wg={};w.wg.parse=function(g,o,j){var f={id:g[a5]("id"),relativeposition:parseInt(g[a5]("relativeposition"))};if(g[a5]("bgcolor")&&g[a5]("bgcolor").length>0){f.bgColor=g[a5]("bgcolor")}if(g[a5]("bgimage")&&g[a5]("bgimage").length>0){f.bgImage=g[a5]("bgimage")}if(g[a5]("opacity")&&g[a5]("opacity").length>0){f.opacity=g[a5]("opacity")}if(w.widget.content[g[a5]("id")]===undefined){if(g[a5]("container")===null){f.container=d.body}w.widget.content[g[a5]("id")]=new w.widget[g[a5]("type")][g[a5]("name")].instance(f);w.widget.content[g[a5]("id")].type=g[a5]("type")}var c={};if(g[a1]("duration")[0]){c.duration=g[a1]("duration")[0][a5]("ms")}else{c.duration=0}var a=null;var k=[];if(g[a1]("properties")[0]){k=g[a1]("properties")[0].childNodes;a={}}for(var h=0;h<k.length;h++){if(k[h].nodeName=="#text"){continue}else{var m=k[h];a[m.nodeName]={};a[m.nodeName].end=m[a5]("end");if(m.nodeName=="top"){w.widget.content[g[a5]("id")].oTop=m[a5]("end")}if(m.nodeName=="left"){w.widget.content[g[a5]("id")].oLeft=m[a5]("end")}}}if(a){c.properties=a}var l=g[a1]("contents")[0][a1]("content");var b=[];for(var h=0;h<l.length;h++){var n=l[h];var e={};e.height=n[a5]("height");e.width=n[a5]("width");if(n[a5]("top")){e.top=parseInt(n[a5]("top"))}else{e.top=0}if(n[a5]("left")){e.left=parseInt(n[a5]("left"))}else{e.left=0}e.type=n[a5]("type");if(n[a5]("id")){e.id=n[a5]("id")}switch(n[a5]("type")){case"image":e.url=n[a5]("url");e.mode=n[a5]("mode");break;case"page":break}b.push(e)}c.content=b;if(o){o.clickActions[j].clickParam[f.id]=c;o.clickActions[j].widgetid=f.id;o.clickActions[j].position=parseInt(g[a5]("position"));o.clickActions[j].fxtype=parseInt(g[a5]("fxtype"));o.clickActions[j].fxeffect=parseInt(g[a5]("fxeffect"));o.clickActions[j].duration=(parseInt(g[a5]("duration")))}else{w.widget.content[g[a5]("id")].displayFunc(c,"loading",parseInt(g[a5]("position")),parseInt(g[a5]("fxtype")),parseInt(g[a5]("fxeffect")),(parseInt(g[a5]("duration"))))}};w.wg.pb={};w.wg.pb.param=null;w.wg.pb.f=false;w.wg.pb.a=function(b){var a=d[a2]("div");a.style.position="absolute";a.style.top="0px";a.style.left="0px";a.id="DivProcessBarCover";a.style.zIndex=99999;if(w.c.b.e=="iphone"){a.style.height=(d[a4][a8]+61)+"px"}else{a.style.height=(d[a4][a8])+"px"}a.style.width=(d[a4][a9])+"px";a[a6]("touchmove",function(f){f.preventDefault()},false);d.body[a3](a);var c=d[a2]("div");c.className="divProgressBarLayer";a[a3](c);c.innerHTML='<div id="DivProgressText"></div><div id="DivProgressBar"><div id="DivProgressBarPercent"></div></div><img id="ImageLoading" src="style/loading.gif" style="display:none;"/>';var e=d[a0]("DivProgressBar");e.style.display="block";a.style.display="none";c.style.opacity=1;w.wg.pb.img=d[a2]("img");w.wg.pb.img[a6]("load",function(){w.wg.pb.ch(b)},false);w.p.panel.image[a6]("load",w.wg.pb.d,false);if(b===false){if(w.wg.wa.animateHandler){clearTimeout(w.wg.wa.animateHandler);if(d[a0]("DivWarning")){w.wg.wa.animateHandler=setTimeout(w.c.hc(this,w.wg.wa.hideAnimate,d[a0]("DivWarning")),5000)}else{w.wg.wa.startAnimate()}}else{w.wg.wa.startAnimate()}}};w.wg.pb.b=function(c){if(w.twmode=="fullscreen"){if(w.p.type=="mainwindow"){w.twmc.style.height=d[a4][a8]+"px";w.twmc.style.width=d[a4][a9]+"px"}}if(w.wg.pb.img.src!=c.img){w.wg.pb.img.src=c.img;if(w.p.type=="mainwindow"){var a=Math.round((w.twmc.clientWidth-209)/2);var e=Math.round((w.twmc.clientHeight-52)/2);var b=d[a0]("DivProcessBarCover").childNodes[0];if(w.twmode=="fixsize"){b.style.left=(parseInt(w.twmc.style.left)+a)+"px";b.style.top=(parseInt(w.twmc.style.top)+e)+"px"}else{b.style.left=(a)+"px";b.style.top=(e)+"px"}}d[a0]("DivProcessBarCover").style.display="block";d[a0]("DivProgressBar").style.display="none";d[a0]("ImageLoading").style.display="block";d[a0]("DivProgressBar").parentNode.style.opacity=1;d[a0]("DivProgressBarPercent").style.width=1+"px";d[a0]("DivProgressText").innerHTML="Loading...";w.wg.pb.param=c}if(w.twToolBar){w.wg.cb1.adjustPosition()}};w.wg.pb.animateHandler=null;w.wg.pb.animate=function(e,c,b){var a={};if(b=="hide"){a.sp=a.cp=e.sp;a.ep=e.op;a.st=a.ct=e.st;a.et=e.ot;a.sf=a.cf=e.sf;a.ef=e.of}else{a.sp=a.cp=e.op;a.ep=e.ep;a.st=a.ct=e.ot;a.et=e.et;a.sf=a.cf=e.of;a.ef=e.ef}a.ps=(parseFloat(a.ep)-parseFloat(a.sp))/(c/10);a.ts=(parseFloat(a.et)-parseFloat(a.st))/(c/10);a.fs=(parseFloat(a.ef)-parseFloat(a.sf))/(c/10);if(isNaN(a.ps)||isNaN(a.ts)||isNaN(a.fs)){}else{a.aa=(c/10);a.ca=0;a.type=b;w.wg.pb.animateRender(a)}};w.wg.pb.animateRender=function(a){a.cp=parseFloat(a.cp)+parseFloat(a.ps);a.ct=parseFloat(a.ct)+parseFloat(a.ts);a.cf=parseFloat(a.cf)+parseFloat(a.fs);w.cs.camera.cp=a.cp;w.cs.camera.ct=a.ct;w.cs.camera.cf=a.cf;a.ca=parseInt(a.ca)+1;w.p.opt();if(a.ca>a.aa){if(a.type=="hide"){w.wg.pb.b(w.wg.pb.param)}else{}}else{w.wg.pb.animateHandler=setTimeout(w.c.hc(this,w.wg.pb.animateRender,a),10)}};w.wg.pb.ch=function(a){w.wg.pb.c0(1,0,-0.05)};w.wg.pb.c0=function(f,b,a){w.p.db.style.opacity=parseFloat(f);f=f+parseFloat(a);if(parseFloat(a)>0){if(parseFloat(f)>parseFloat(b)){w.p.panel.image.src=w.wg.pb.param.imgs[0]}else{setTimeout(w.c.hc(this,w.wg.pb.c0,f,b,a),10)}}else{if(parseFloat(f)<parseFloat(b)){w.p.db.style.opacity=parseFloat(b);w.wg.pb.c()}else{setTimeout(w.c.hc(this,w.wg.pb.c0,f,b,a),10)}}};w.wg.pb.cd=function(){w.wg.pb.c0(0,1,0.05)};w.wg.pb.c=function(){if(window.widget.thumbnail&&window.widget.thumbnail.changeScene){window.widget.thumbnail.changeScene(w.cs.id)}w.txa.cc(null,"scene");var e=w.wg.pb.param;var f=e.con.childNodes;if(w.m.g.mapstate=="display"){w.m.g.display()}if(w.m.c.mapstate=="display"){w.m.c.display()}while(true){if(f.length>0){e.con.removeChild(f[(f.length-1)])}else{break}}if(e.type!="common"){w.p.dimage.style.display="none";w.p.db.style.display="block";for(var c=0;c<w.p.panel[e.type].length;c++){var b=w.p.panel[e.type][c].getContext("2d");e.con[a3](w.p.panel[e.type][c]);w.p.opt()}}else{w.p.dimage.style.display="block";w.p.db.style.display="none"}d[a0]("DivProgressText").innerHTML="Loading...&nbsp;&nbsp;0%";d[a0]("DivProgressBar").style.display="block";d[a0]("ImageLoading").style.display="none";for(var c=0;c<w.cs.hotspots.length;c++){w.cs.hotspots[c].target.style.display="block";w.hs.b(w.cs.hotspots[c])}switch(e.type){case"cube":e.count=6;e.curr=0;for(var c=0;c<e.imgs.length;c++){var h=w.p.panel.cube[c];h.height="128";h.width="128";h.style.webkitTransformOriginZ="-1px";h.style.webkitTransform=h.style.webkitTransform.split("translate3d")[0]+" translate3d(-64.0px,-64.0px,-64.0px)";if(w.wg.pb.img.height>w.wg.pb.img.width){h.getContext("2d").drawImage(w.wg.pb.img,0,(128*c),128,128,0,0,128,128)}else{h.getContext("2d").drawImage(w.wg.pb.img,(128*c),0,128,128,0,0,128,128)}}w.wg.pb.cd();break;case"cylinder":var g=w.wg.pb.img.height;var j=w.wg.pb.img.width;var l=j/2/Math.PI;for(var c=0;c<72;c++){var h=w.p.panel.cylinder[c];h.height=g;h.width=((j/72)+2);h.style.webkitTransform="rotateY(-"+(c*5)+"deg) translate3d(-"+(j/72)/2+"px,-"+g/2+"px,-"+l+"px)";var k=h.getContext("2d");k.drawImage(w.wg.pb.img,(j/72)*c,0,(j/72),g,1,0,(j/72),g);k.drawImage(w.wg.pb.img,((j/72)*(c+1)-1),0,1,g,(j/72+1),0,1,g)}w.wg.pb.cd();break;case"common":var g=w.wg.pb.img.height;var j=w.wg.pb.img.width;var a=w.p.panel.common.canvas;a.height=g;a.width=j;w.p.dimage.appendChild(a);var k=a.getContext("2d");w.p.panel.common.scale=1;w.p.csc.resizePosition(a);w.wg.pb.cd();break;default:break}};w.wg.pb.d=function(){var g=w.wg.pb.param;if(w.cs.type=="cube"){var b=1800;if(w.c.b.e=="iphone"){b=480}else{if(w.c.b.e=="ipad"){b=768}}var e=w.p.panel.cube[parseInt(g.curr)];if(e){if(w.c.b.e=="pc"){e.height=(b+10);e.width=(b+10);e.style.webkitTransformOriginZ="-5px";e.style.webkitTransform=e.style.webkitTransform.split("translate3d")[0]+" translate3d(-"+(b/2+5)+"px,-"+(b/2+5)+"px,-"+(b/2+5)+"px)";var m=parseInt(this.height);var c=e.getContext("2d");c.drawImage(this,0,0,1,m,0,5,5,b);c.drawImage(this,0,0,m,1,5,0,b,5);c.drawImage(this,0,0,m,m,5,5,b,b);c.drawImage(this,(m-1),0,1,m,(b+5),5,5,b);c.drawImage(this,0,(m-1),m,1,5,(b+5),b,5)}else{e.height=(b+2);e.width=(b+2);e.style.webkitTransformOriginZ="-1px";e.style.webkitTransform=e.style.webkitTransform.split("translate3d")[0]+" translate3d(-"+(b/2+1)+"px,-"+(b/2+1)+"px,-"+(b/2+1)+"px)";var m=parseInt(this.height);var c=e.getContext("2d");c.drawImage(this,0,0,1,m,0,1,1,b);c.drawImage(this,0,0,m,1,1,0,b,1);c.drawImage(this,0,0,m,m,1,1,b,b);c.drawImage(this,(m-1),0,1,m,(b+1),1,1,b);c.drawImage(this,0,(m-1),m,1,1,(b+1),b,1)}}else{return}g.curr=parseInt(g.curr)+1;if(d[a0]("DivProgressBar")){d[a0]("DivProgressBar").style.display="block";d[a0]("DivProgressBarPercent").style.width=Math.round((g.curr/g.count)*(d[a0]("DivProgressBar")[a9]-4))+"px";d[a0]("DivProgressText").innerHTML="Loading...&nbsp;&nbsp;"+Math.round((g.curr/g.count)*100)+"%"}if(g.curr>=g.count){for(var f=0;f<w.cs.hotspots.length;f++){w.cs.hotspots[f].target.style.display="block";w.hs.b(w.cs.hotspots[f])}if(g.ptf){w.wg.pb.animate(g.ptf,200,"display")}setTimeout(w.c.hc(this,w.wg.pb.e,d[a0]("DivProgressBar").parentNode,300),500)}else{w.p.panel.image.src=g.imgs[parseInt(g.curr)]}}else{if(w.cs.type=="cylinder"){var j=this.height;var n=this.width;var p=n/2/Math.PI;for(var f=0;f<72;f++){var l=w.p.panel.cylinder[f];l.height=j;l.width=((n/72)+2);l.style.webkitTransform="rotateY(-"+(f*5)+"deg) translate3d(-"+(n/72)/2+"px,-"+j/2+"px,-"+p+"px)";var o=l.getContext("2d");o.drawImage(this,(n/72)*f,0,(n/72),j,1,0,(n/72),j);o.drawImage(this,((n/72)*(f+1)-1),0,1,j,(n/72+1),0,1,j)}if(d[a0]("DivProgressBar")){d[a0]("DivProgressBar").style.display="block";d[a0]("DivProgressBarPercent").style.width=Math.round((d[a0]("DivProgressBar")[a9]-4))+"px";d[a0]("DivProgressText").innerHTML="Loading...&nbsp;&nbsp;100%"}for(var f=0;f<w.cs.hotspots.length;f++){w.cs.hotspots[f].target.style.display="block";w.hs.b(w.cs.hotspots[f])}if(g.ptf){w.wg.pb.animate(g.ptf,200,"display")}setTimeout(w.c.hc(this,w.wg.pb.e,d[a0]("DivProgressBar").parentNode,300),500)}else{if(w.cs.type=="common"){var a=w.p.panel.common.canvas;var o=a.getContext("2d");if(w.p.panel.common.type[w.cs.id]=="ActualSize"){a.height=this.height;a.width=this.width}else{var k=w.twmc.clientHeight/this.height;var h=w.twmc.clientWidth/this.width;if(k>h){a.width=w.twmc.clientWidth;a.height=h*this.height}else{a.height=w.twmc.clientHeight;a.width=k*this.width}}o.drawImage(this,0,0,this.width,this.height,0,0,a.width,a.height);w.p.csc.resizePosition(a);if(d[a0]("DivProgressBar")){d[a0]("DivProgressBar").style.display="block";d[a0]("DivProgressBarPercent").style.width=Math.round((d[a0]("DivProgressBar")[a9]-4))+"px";d[a0]("DivProgressText").innerHTML="Loading...&nbsp;&nbsp;100%"}for(var f=0;f<w.cs.hotspots.length;f++){w.cs.hotspots[f].target.style.display="block";w.hs.b(w.cs.hotspots[f])}setTimeout(w.c.hc(this,w.wg.pb.e,d[a0]("DivProgressBar").parentNode,300),500)}}}};w.wg.pb.e=function(b,a){if(w.ps.xml.pw){w.ps.xml.pw=null}b.style.opacity=parseFloat(b.style.opacity)-10/a;if(parseFloat(b.style.opacity)>0.1){setTimeout(w.c.hc(this,w.wg.pb.e,b,a),10)}else{b.style.opacity=0;d[a0]("DivProcessBarCover").style.display="none";if(w.p.ap===false){if(w.cs.control.speed>0){w.p.autoPlay("1")}else{if(w.cs.control.speed<0){w.p.autoPlay("-1")}}}else{w.wg.mv.animateFunc()}}};w.wg.orz=function(){if(w.c.b.e=="iphone"){if(w.c.b.e=="iphone"){if(d[a4][a8]>d[a4][a9]){d.body.style.height="417px"}else{d.body.style.height="269px"}}}if(w.twmode=="fullscreen"){if(w.p.type=="mainwindow"){w.twmc.style.height=d[a4][a8]+"px";w.twmc.style.width=d[a4][a9]+"px"}}setTimeout(w.c.sh,500);w.wg.rz()};w.wg.rz=function(){var a=null;if(d[a0]("DivProgressBar")){if(w.c.state=="pano"){var c=d[a0]("DivProgressBar").parentNode;if(c.parentNode.clientHeigh>0&&c.parentNode[a9]>0){c.style.top=Math.round((d[a4][a8]-c[a8])/2)+"px";c.style.left=Math.round((d[a4][a9]-c[a9])/2)+"px"}else{c.style.top=Math.round((d[a4][a8]-52)/2)+"px";c.style.left=Math.round((d[a4][a9]-209)/2)+"px"}}}if(w.twToolBar){w.wg.cb1.adjustPosition1()}if(d[a0]("DivWarning")){d[a0]("DivWarning").style.left=Math.round((d[a4][a9]-280)/2)+"px";d[a0]("DivWarning").style.top=Math.round((d[a4][a8]-150)/2)+"px"}if(d[a0]("DivPopWindow")){var e=d[a0]("DivPopWindow");e.style.top=Math.round((d[a4][a8]-e[a8])/2)+"px";e.style.left=Math.round((d[a4][a9]-e[a9])/2)+"px"}if(w.m.g.mctype=="mainwindow"&&w.twmode=="fullscreen"){w.m.g.rz()}if(w.m.c.mctype=="mainwindow"&&w.twmode=="fullscreen"){w.m.c.rz()}for(__ in w.text.i){var e=w.text.i[__];if(e.type=="mainwindow"&&w.twmode=="fullscreen"){e.resizePosition(e.target)}}for(__ in w.txa.i){var e=w.txa.i[__];if(e.type=="mainwindow"&&w.twmode=="fullscreen"){e.resizePosition(e.mc)}}for(__ in w.img.i){var e=w.img.i[__];if(e.type=="mainwindow"&&w.twmode=="fullscreen"){e.resizePosition(e.mc)}}for(var b=0;b<w.b.buttons.length;b++){var e=w.b.buttons[b];if(e.type=="mainwindow"){e.resizePosition(e.target)}}for(__ in window.widget.thumbnail.content){var e=window.widget.thumbnail.content[__];e.resizePosition()}};w.wg.pw={};w.wg.pw.init=function(){var a=d[a2]("div");a.id="DivPopWindow";d.body.appendChild(a);a.style.position="absolute";a.style.zIndex="10002";a.style.display="none";d[a2]("img").src="style/loading.gif"};w.wg.pw.display=function(c){var b=d[a0]("DivPopWindow");b[a7]("touchend",w.wg.pw.hidden,false);b.innerHTML='<img src="style/loading.gif" />';b.style.display="block";b.style.visibility="hidden";b.style.top=Math.round((d[a4][a8]-b[a8])/2)+"px";b.style.left=Math.round((d[a4][a9]-b[a9])/2)+"px";b.style.visibility="visible";var a=d[a2]("img");a.src=c.uri;a[a6]("dragstart",w.c.e.se,false);a.style.webkitUserSelect="none";a[a6]("load",function(){w.wg.pw.getImage(a)},false)};w.wg.pw.getImage=function(a){var b=d[a0]("DivPopWindow");b.innerHTML="";b[a3](a);b.style.top=Math.round((d[a4][a8]-a[a8])/2)+"px";b.style.left=Math.round((d[a4][a9]-a[a9])/2)+"px";if(w.c.b.e=="pc"){b[a6]("click",w.wg.pw.hidden,false)}else{b[a6]("touchend",w.wg.pw.hidden,false)}};w.wg.pw.hidden=function(b){var a=d[a0]("DivPopWindow");a.style.display="none";a.style.top="-1000px";a.style.left="-1000px";if(w.c.b.e=="pc"){a[a7]("click",w.wg.pw.hidden,false)}else{a[a7]("touchend",w.wg.pw.hidden,false)}w.c.e.se(b)};w.wg.wa={};w.wg.wa.info1="This virtual tour is generated by Easypano Tourweaver trial version. ";w.wg.wa.info2="To avoid seeing the window again, please register Easypano Tourweaver.  ";w.wg.wa.info3="For more information, please visit <a href='http://www.easypano.com'>http://www.easypano.com</a>. ";w.wg.wa.init=function(){var a=d[a2]("div");a.id="DivWarning";a.style.position="absolute";a.style.zIndex=99999;a.style.top=Math.round((d[a4][a8]-150)/2)+"px";a.style.left=Math.round((d[a4][a9]-280)/2)+"px";a.innerHTML='<div style="margin:10px;">'+w.wg.wa.info1+w.wg.wa.info2+w.wg.wa.info3+"</div>";a.style.opacity=1;a[a6]("touchmove",function(b){b.preventDefault();b.stopPropogation()},false);d.body[a3](a);return a};w.wg.wa.animateHandler=null;w.wg.wa.startAnimate=function(){var a=w.wg.wa.init();if(w.wg.wa.animateHandler){clearTimeout(w.wg.wa.animateHandler)}w.wg.wa.animateHandler=setTimeout(w.c.hc(this,w.wg.wa.hideAnimate,a),5000)};w.wg.wa.hideAnimate=function(a){if(a.parentNode){if(w.wg.wa.animateHandler){w.wg.wa.animateHandler=setTimeout(w.c.hc(this,w.wg.wa.endAnimate,a),5000)}a.style.display="none"}else{w.wg.wa.startAnimate()}};w.wg.wa.endAnimate=function(a){a.style.opacity=1;a.style.display="block";if(w.wg.wa.animateHandler){clearTimeout(w.wg.wa.animateHandler)}w.wg.wa.animateHandler=setTimeout(w.c.hc(this,w.wg.wa.hideAnimate,a),5000)};w.wg.cb1={};w.wg.cb1.tt={};w.wg.cb1.mc=d[a2]("div");w.wg.cb1.a=function(){var h=w.c.b.e;var f=w.wg.cb1.mc;f.id="DivToolBar";f[a6]("touchmove",w.c.e.se,false);f[a6]("mousedown",function(){w.p.stop()},false);f[a6]("touchstart",function(){w.p.stop()},false);f.style.webkitUserSelect="none";var g=d[a2]("div");g.className="divChangeMode1";w.wg.cb1.tt.mode={status:"on",target:g,on:{style:"divChangeMode1"},off:{style:"divChangeMode2"}};if(h=="pc"){g[a6]("click",function(){w.wg.cb1.toogle("mode")},false)}else{g[a6]("touchend",function(){w.wg.cb1.toogle("mode")},false)}f[a3](g);if(w.c.b.e!="iphone"){var e=d[a2]("div");e.className="divZoomout";if(h=="pc"){e[a6]("click",w.c.e.zoomout,false)}else{e[a6]("touchend",w.c.e.zoomout,false)}f[a3](e);var i=d[a2]("div");i.className="divZoomin";if(h=="pc"){i[a6]("click",w.c.e.zoomin,false)}else{i[a6]("touchend",w.c.e.zoomin,false)}f[a3](i)}var a=d[a2]("div");a.className="divLeft";if(h=="pc"){a[a6]("click",w.c.e.left,false)}else{a[a6]("touchend",w.c.e.left,false)}f[a3](a);var j=d[a2]("div");j.className="divRight";if(h=="pc"){j[a6]("click",w.c.e.right,false)}else{j[a6]("touchend",w.c.e.right,false)}f[a3](j);var c=d[a2]("div");c.className="divUp";if(h=="pc"){c[a6]("click",w.c.e.up,false)}else{c[a6]("touchend",w.c.e.up,false)}f[a3](c);var b=d[a2]("div");b.className="divDown";if(h=="pc"){b[a6]("click",w.c.e.down,false)}else{b[a6]("touchend",w.c.e.down,false)}f[a3](b);f.style.display="none";d.body[a3](f)};w.wg.cb1.toogle=function(b){var a=w.wg.cb1.tt[b];if(a.status=="off"){a.status="on";if(a.on.fn){player[a.on.fn]()}else{w.cs.control.mode=false}if(a.on.style){a.target.className=a.on.style}}else{a.status="off";if(a.off.fn){player[a.off.fn]()}else{w.cs.control.mode=true}if(a.off.style){a.target.className=a.off.style}}};w.wg.cb1.adjustPosition=function(){var a=w.c.b.e;w.wg.cb1.mc.style.display="block";w.wg.cb1.adjustPosition1()};w.wg.cb1.adjustPosition1=function(){if(w.wg.cb1){if(w.c.b.e=="iphone"){w.wg.cb1.mc.style.top=(d[a4][a8]-31-5)+"px";w.wg.cb1.mc.style.left=Math.round((d[a4][a9]-195)/2)+"px"}else{w.wg.cb1.mc.style.top=(d[a4][a8]-36-5)+"px";w.wg.cb1.mc.style.left=Math.round((d[a4][a9]-416)/2)+"px"}}};w.wg.mv={};w.wg.mv.scenes={};w.wg.mv.func=null;w.wg.mv.mname="";w.wg.mv.animateHandler=null;w.wg.mv.animate=function(){var a=w.wg.mv.scenes[w.cs.id];if(a){w.wg.mv.animateFunc()}};w.wg.mv.animateFunc=function(){var a=w.wg.mv.scenes[w.wg.mv.mname][w.cs.id];if(a){if(a.ps&&a.ps>0){a.cp=a.cp+a.ps;w.cs.camera.cp=a.cp}if(a.ts&&a.ts>0){a.ct=a.ct+a.ts;w.cs.camera.ct=a.ct}if(a.fs&&a.fs>0){a.fs=a.cf+a.fs;w.cs.camera.cf=a.cf}w.p.opt();if(a.cp<a.ep){if(w.wg.mv.animateHandler){clearTimeout(w.wg.mv.animateHandler)}w.wg.mv.animateHandler=setTimeout(w.wg.mv.animateFunc,50)}else{a.cp=a.sp;a.ct=a.st;w.p.ap=false;if(a.next){w.hs.e.changeScene({id:a.next})}else{w.wg.mv.mname="";w.wg.mv.func()}}}};w.wg.mv.autoPlay=function(a){for(__ in w.wg.mv.scenes){if(a.mname==__){w.wg.mv.mname=__;break}}if(w.wg.mv.mname.length>0){if(a.id){if(w.p.ap===false){if(a.func){w.wg.mv.func=a.func}w.p.ap=true;if(w.cs.id==a.id){w.wg.mv.animateFunc()}else{w.hs.e.changeScene({id:a.id})}}}}};w.wg.mv.pausePlay=function(){if(w.wg.mv.animateHandler){clearTimeout(w.wg.mv.animateHandler)}};w.wg.mv.continuePlay=function(){w.wg.mv.autoPlay()};w.wg.mv.stopPlay=function(){w.wg.mv.pausePlay();w.p.ap=false;w.wg.mv.func=null;var a=w.wg.mv.scenes[w.cs.id];if(!isNaN(a.sp)){a.cp=a.sp}if(!isNaN(a.st)){a.ct=a.st}if(!isNaN(a.sf)){a.cf=a.sf}};w.hs={};w.hs.a=function(){this.pan=0;this.tilt=0;this.common="";this.hover="";this.text="";this.textpos="";this.target=null;this.scene=null;this.height=10;this.width=10};w.hs.a.prototype={init:function(){var f=w.c.b.e;var a=d[a2]("div");this.isInit=true;this.target=a;this.srcElement=a;a.style.position="absolute";a.style.height=this.height+"px";a.style.width=this.width+"px";a.style.top="0px";a.style.left="0px";a.style.webkitUserSelect="none";var b='<table style="height:100%;width:100%;text-align:center;">';a.style.cursor="pointer";if(isNaN(this.pan)){this.pan=0}if(this.text&&this.text.length>0){switch(this.textpos.toLowerCase()){case"left":b+='<tr><td style="text-align:right;"><img src="'+this.text+'"/></td><td style="text-align:left;"><img src="'+this.common+'"/></td></tr>';break;case"right":b+='<tr><td style="text-align:right;"><img src="'+this.common+'"/></td><td style="text-align:left;"><img src="'+this.text+'"/></td></tr>';break;case"top":b+='<tr><td style="vertical-align:bottom;"><img src="'+this.text+'"/></td></tr><tr><td style="vertical-align:top;"><img src="'+this.common+'"/></td></tr>';break;default:b+='<tr><td style="vertical-align:bottom;"><img src="'+this.common+'"/></td></tr><tr><td style="vertical-align:top;"><img src="'+this.text+'"/></td></tr>';break}b+="</table>";a.innerHTML=b}else{a.style.background="url("+this.common+") center center no-repeat"}this.target.style.display="none";w.p.de[a3](this.target);if(this.clickParam&&(typeof(this.clickParam)).toLowerCase()=="string"){this.clickParam=JSONObject.parse(this.clickParam)}var e=false;for(var c=0;c<this.clickActions.length;c++){var g=this.clickActions[c];if(g.clickFunc){if(g.clickFunc.indexOf("|")>0){if(e===false){w.p.sta=g.clickFunc.split("|")[1];g.clickFunc=w.c.hc(this,w.c.e.toggle,g);if(f=="pc"){this.target[a6]("mousedown",w.c.e.se,false)}else{this.target[a6]("touchstart",w.c.e.se,false)}e=true}}else{if(g.clickFunc=="displayFunc"&&g.widgetid){g.clickFunc=w.c.hc(this,function(h){w.widget.content[h.widgetid].displayFunc(h.clickParam[h.widgetid],this,h.position,h.fxtype,h.fxeffect,h.duration)},g)}else{if(g.clickFunc=="displayOrHideFunc"&&g.widgetid){g.clickFunc=w.c.hc(this,function(h){w.widget.content[h.widgetid].displayOrHideFunc(h.clickParam[h.widgetid],this,h.position,h.fxtype,h.fxeffect,h.duration)},g)}else{if(g.clickParam&&(typeof(g.clickParam).toLowerCase()=="string")){g.clickParam=JSONObject.parse(g.clickParam)}g.clickFunc=w.c.hc(this,w.c.e[g.clickFunc],g.clickParam)}}}}}this.clickFunc=w.c.hc(this,function(){for(var h=0;h<this.clickActions.length;h++){if(this.clickActions[h].clickFunc){this.clickActions[h].clickFunc()}}});if(f=="pc"){this.target.addEventListener("click",this.clickFunc,false)}else{this.target.addEventListener("touchend",this.clickFunc,false)}w.hs.b(this)},isInit:false,isCurrent:false};w.hs.b=function(m){if(w.cs){if(w.cs.type!="common"){var a=Math.PI/180;var j=Math.cos((360-m.scene.camera.cp)*a);var q=Math.sin((360-m.scene.camera.cp)*a);var t=Math.cos(m.scene.camera.ct*a);var l=Math.sin(m.scene.camera.ct*a);var v=0;var u=0;var i=(360-m.pan)*a;var p=m.tilt*a;if(w.cs.type=="cube"){var h=Math.cos(i)*Math.cos(p);var g=Math.sin(i)*Math.cos(p);var f=Math.sin(p)}else{if(w.cs.type=="cylinder"){var h=Math.cos(i);var g=Math.sin(i);var f=Math.tan(p)}}var k=j*h+q*g;var o=t*k+l*f;var e=false;if(o>0){var n=w.p.focalLength/o;v=(-j*g+q*h)*n+m.scene.camera.vw/2;u=-(t*f-l*k)*n+m.scene.camera.vh/2;e=true}else{v=-100000;u=-100000}if(e){m.target.style.webkitTransition="none"}m.target.style.left=v-Math.round(m.width/2)+"px";m.target.style.top=u-Math.round(m.height/2)+"px"}else{var s=w.p.panel.common.canvas;var c=w.p.panel.image;var r=parseInt(s.width)/parseInt(c.width);var b=parseInt(s.height)/parseInt(c.height);if(isNaN(parseInt(s.style.left))){m.target.style.left="-5000px";m.target.style.top="-5000px"}else{m.target.style.left=(parseInt(s.style.left)+(r*(m.pan))-(m.target.clientWidth/2))+"px";m.target.style.top=(parseInt(s.style.top)+(b*(m.tilt))-(m.target.clientHeight/2))+"px"}}}};w.hs.e={};w.hs.e.changeScene1=function(e){if(d[a0]("DivPopWindow")){d[a0]("DivPopWindow").style.display="none"}var b=false;for(var c=0;c<w.cs.hotspots.length;c++){var g=w.cs.hotspots[c];g.target.style.top="-1000px";g.target.style.left="-1000px";g.target.style.display="none"}if(w.p.amh){clearTimeout(w.p.amh)}var a={};a.sp=w.cs.camera.cp;a.st=w.cs.camera.ct;a.sf=w.cs.camera.cf;for(var c=0;c<w.gs.scenes.length;c++){if(w.gs.scenes[c].id==e.id){w.cs=w.gs.scenes[c];if(e.ep){a.ep=(parseFloat(e.ep)+180)}else{a.ep=w.cs.camera.cp}if(e.op){a.op=(parseFloat(e.op)+180)}else{a.op=a.sp}if(e.et){a.et=parseFloat(e.et)}else{a.et=w.cs.camera.ct}if(e.ot){a.ot=parseFloat(e.ot)}else{a.ot=a.st}if(e.ef){a.ef=parseFloat(e.ef)}else{a.ef=w.cs.camera.cf}if(e.of){a.of=parseFloat(e.of)}else{a.of=w.cs.scene.nz}break}}for(var c=0;c<w.cs.hotspots.length;c++){if(!(w.cs.hotspots[c].isInit)){w.cs.hotspots[c].init();w.hs.b(w.cs.hotspots[c])}}var f=[];if(w.cs.type=="cube"){f.push(w.cs.images.right);f.push(w.cs.images.front);f.push(w.cs.images.left);f.push(w.cs.images.backend);f.push(w.cs.images.top);f.push(w.cs.images.bottom)}else{if(w.cs.type=="cylinder"){f.push(w.cs.images.cylinder)}else{if(w.cs.type=="common"){f.push(w.cs.images.common)}}}w.wg.pb.param={img:w.cs.preImage,imgs:f,type:w.cs.type,con:w.p.dd,mapstatus:b,ptf:a};if(w.cs.effect){}if(w.cs.type!="common"){w.wg.pb.b(w.wg.pb.param)}else{w.wg.pb.b(w.wg.pb.param)}for(var c=0;c<w.gs.scenes.length;c++){if(w.gs.scenes[c].gradar){w.gs.scenes[c].gradar.con.clearRect(0,0,100,100);w.gs.scenes[c].gradar.container.style.zIndex=2;w.gs.scenes[c].gradar.cv.style.display="none";w.gs.scenes[c].gradar.point.style.background="url("+w.gs.scenes[c].gradar.common+") no-repeat center center"}if(w.gs.scenes[c].cradar){w.gs.scenes[c].cradar.con.clearRect(0,0,100,100);w.gs.scenes[c].cradar.cv.style.display="none";w.gs.scenes[c].cradar.container.style.zIndex=2;w.gs.scenes[c].cradar.point.style.background="url("+w.gs.scenes[c].cradar.common+") no-repeat center center"}}if(window.widget.thumbnail&&window.widget.thumbnail.changeScene){window.widget.thumbnail.changeScene(w.cs.id)}};w.hs.e.changeScene=function(a){if(w.wg.pb.f===false){w.wg.pb.f=true;w.hs.e.changeScene1(a)}else{if(a.id!=w.cs.id&&w.wg.pb.cfh==null){w.hs.e.changeScene1(a)}}};w.hs.e.hideAllHotspot=function(){for(var a=0;a<w.cs.hotspots.length;a++){w.cs.hotspots[a].target.style.display="none"}};w.hs.e.displayAllHotspot=function(){for(var a=0;a<w.cs.hotspots.length;a++){w.cs.hotspots[a].target.style.display="block"}};w.rd={};w.rd.radars={};w.rd.a=function(){this.common="";this.hover="";this.currf=0;this.minf=0;this.maxf=0;this.currp=0;this.minp=0;this.maxp=0;this.color="0,150,255";this.opacity=0;this.sceneid="";this.id="";this.y=0;this.x=0;this.height=10;this.width=10;this.initAngle=0;this.initPan=0};w.rd.a.prototype={init:function(){if(this.initPan<0){this.initPan=360+parseFloat(this.initPan)}var a=d[a2]("div");a.style.position="absolute";a.style.zIndex=2;if(this.type!="google"){a.style.top=(this.y-Math.round((100-this.height)/2))+"px";a.style.left=(this.x-Math.round((100-this.width)/2))+"px"}else{a.style.top=0+"px";a.style.left=0+"px"}var c=this.color.split(",");this.color=c[0]+","+c[1]+","+c[2];this.container=a;a.id=this.id;var f=d[a2]("canvas");f.height="100";f.width="100";f.style.display="none";this.cv=f;var b=f.getContext("2d");this.con=b;a[a3](f);var g=d[a2]("div");g.style.position="absolute";g.style.cursor="pointer";if(this.height&&this.width){g.style.top=Math.round((100-this.height)/2)+"px";g.style.left=Math.round((100-this.width)/2)+"px";g.style.height=this.height+"px";g.style.width=this.width+"px"}else{g.style.top=Math.round((100-40)/2)+"px";g.style.left=Math.round((100-40)/2)+"px";g.style.height=40+"px";g.style.width=40+"px"}g.style.background="url("+this.common+") no-repeat center center";this.point=g;if(this.clickFunc){this.clickFunc=w.c.hc(this,w.c.e.changeScene,{id:this.sceneid});if(w.c.b.e=="pc"){g[a6]("click",this.clickFunc,false)}else{g[a6]("touchend",this.clickFunc,false)}}a[a3](g);w.rd.radars[this.id]=this;for(var e=0;e<w.gs.scenes.length;e++){if(w.gs.scenes[e].id==this.sceneid){if(this.type=="google"){w.gs.scenes[e].gradar=this}else{w.gs.scenes[e].cradar=this}if(this.type!="google"){if(w.gs.scenes[e].mapid){w.m.c.maps[w.gs.scenes[e].mapid].radars.push(this)}else{w.gs.scenes[e].mapid=this.type;w.m.c.maps[this.type].radars.push(this)}}break}}}};w.rd.b=function(f){var k=null;var l=f.cradar;var j=f.gradar;for(var e=0;e<2;e++){if(e){k=j}else{k=l}if(k){k.cv.style.display="block";k.container.style.zIndex=1;var a=k.con;a.clearRect(0,0,100,100);k.point.style.background="url("+k.hover+") no-repeat center center";var c=parseInt(f.camera.cf);var h=360-parseInt(k.initAngle)-(parseInt(k.initPan)+180)+f.camera.cp-c/2;if(h<0){h=parseFloat(h)+360}var g=360-parseInt(k.initAngle)-(parseInt(k.initPan)+180)+f.camera.cp+c/2;if(g>360){g=parseFloat(g)-360}var b=a.createRadialGradient(50,50,0,50,50,55);b.addColorStop(0,("rgba("+k.color+",1)"));b.addColorStop(1,("rgba("+k.color+",0)"));a.fillStyle=b;a.beginPath();a.moveTo(50,50);if(h>g){a.arc(50,50,50,(Math.PI/180)*parseFloat(g),(Math.PI/180)*parseFloat(h),true)}else{a.arc(50,50,50,(Math.PI/180)*parseFloat(h),(Math.PI/180)*parseFloat(g),false)}a.closePath();a.fill()}}};w.rd.c=function(c,g,i){var a=c.y-i.y;var b=c.x-i.x;var f=g.y-i.y;var h=g.x-i.x;return{s:w.rd.d(a,b),e:w.rd.d(f,h)}};w.rd.d=function(a,b){var c=Math.atan(Math.abs(a/b))*180/Math.PI;if(a>=0){if(b>=0){c=360-c}else{c=180+c}}else{if(b<0){c=180-c}}return c};w.rd.ta={};w.rd.e={};w.rd.f={o:{},s:{},e:{}};w.rd.e.a1=function(i){var f=w.m.i.mc;if(w.m.i.mtype=="google"){var h=w.c.f(w.rd.ta.cr.point);w.rd.f.o.x=Math.round((h.left+h.right)/2)+2;w.rd.f.o.y=Math.round((h.top+h.bottom)/2)+2}else{var h=w.c.f(w.rd.ta.gr.point);var j=w.rd.ta.gr.googleLayer.getPanes().mapPane.parentNode.style.webkitTransform.split(" ");var g=parseInt(j[0].substring(10,(j[0].length-3)));var c=parseInt(j[1].substring(0,(j[1].length-3)));w.rd.f.o.x=(Math.round((h.left+h.right)/2)+2+g);w.rd.f.o.y=(Math.round((h.top+h.bottom)/2)+2+c)}var b=w.rd.f.s;if(w.c.b.e=="pc"){b.x=i.clientX;b.y=i.clientY;document.addEventListener("mousemove",w.rd.e.b1,false);document.addEventListener("mouseup",w.rd.e.c1,false)}else{var a=i.changedTouches[0];b.x=a.clientX;b.y=a.clientY;document.addEventListener("touchmove",w.rd.e.b,false);document.addEventListener("touchend",w.rd.e.c1,false);w.m.g.mapo.draggable=false;w.m.g.mapo.center=w.m.g.map.getCenter();w.m.g.mapo.zoom=w.m.g.map.getZoom();w.m.g.map.setOptions(w.m.g.mapo)}w.c.e.se(i)};w.rd.e.b=function(f){var c=w.rd.f.e;var a=f.changedTouches[0];c.x=a.clientX;c.y=a.clientY;var g=w.rd.c(w.rd.f.s,c,w.rd.f.o).e;var b="";if(w.m.i.mtype=="google"){b=w.rd.ta.cr}else{b=w.rd.ta.gr}cs.camera.cp=(-g+parseInt(b.initAngle)+(parseInt(b.initPan)+180));w.p.opt();w.rd.f.s.x=a.clientX;w.rd.f.s.y=a.clientY;w.c.e.se(f)};w.rd.e.b1=function(b){var a=w.rd.f.e;a.x=b.clientX;a.y=b.clientY;var c=w.rd.c(w.rd.f.s,a,w.rd.f.o).e;if(w.m.i.mtype=="google"){_tg=w.rd.ta.cr}else{_tg=w.rd.ta.gr}cs.camera.cp=(-c+parseInt(_tg.initAngle)+(parseInt(_tg.initPan)+180));w.p.opt();w.rd.f.s.x=b.clientX;w.rd.f.s.y=b.clientY};w.rd.e.c1=function(){if(w.c.b.e=="pc"){document.removeEventListener("mousemove",w.rd.e.b1,false);document.removeEventListener("mouseup",w.rd.e.c1,false)}else{document.removeEventListener("touchmove",w.rd.e.b,false);document.removeEventListener("touchup",w.rd.e.c1,false);w.m.g.mapo.draggable=true;w.m.g.mapo.center=w.m.g.map.getCenter();w.m.g.mapo.zoom=w.m.g.map.getZoom();w.m.g.map.setOptions(w.m.g.mapo)}};w.m={};w.m.hotspot=function(){this.x=-1;this.y=-1;this.hint="";this.common="";this.hover="";this.height=0;this.width=0};w.m.hotspot.prototype={clickFunc:"",clickParam:""};w.m.g={};w.m.g.mc=document.createElement("div");w.m.g.isDisplay=false;w.m.g.cx=-1;w.m.g.cy=-1;w.m.g.zoom=12;w.m.g.sv=null;w.m.g.issv=false;w.m.g.hotspots=[];w.m.g.radars=[];w.m.g.customLayer=function(c,b,a){this.position=c;this.map=b;this.setMap(b);if(a.type=="radar"){this.radar=a.target}else{if(a.type=="hotspot"){this.hotspot=a.target}else{this.type="refrence"}}};w.m.g.init=function(){var k=w.c.b.e;var f=w.m.g.mc;f.style.webkitUserSelect="none";var n={zoom:parseInt(w.m.g.zoom),center:new google.maps.LatLng(parseFloat(w.m.g.cy),parseFloat(w.m.g.cx)),navigationControl:true,mapTypeControl:false,scaleControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP};w.m.g.mapo=n;w.m.g.map=new google.maps.Map(f,n);new w.m.g.customLayer(null,w.m.g.map,{type:"refrence"});w.m.g.sv=w.m.g.map.getStreetView();google.maps.event.addListener(w.m.g.sv,"visible_changed",function(){if(w.m.g.sv){if(w.m.g.sv.getVisible()){w.m.g.issv=true}else{w.m.g.issv=false}}else{w.m.g.issv=false}if(w.m.g.issv===true){for(var j=0;j<w.m.g.hotspots.length;j++){var o=w.m.g.hotspots[j];if(o.eventHandler){google.maps.event.removeListener(o.eventHandler);o.eventHandler=null}if(o.type=="streetview"){if(o.clickFunc){o.eventHandler=google.maps.event.addListener(o.marker,"click",o.clickFunc)}}else{o.marker.setMap(null)}}}else{for(var j=0;j<w.m.g.hotspots.length;j++){var o=w.m.g.hotspots[j];if(o.eventHandler){google.maps.event.removeListener(o.eventHandler);o.eventHandler=null}if(o.type=="streetview"){o.eventHandler=google.maps.event.addListener(o.marker,"click",w.c.hc(o,function(){if(this.panoid&&this.pov){w.m.g.sv.setPano(this.panoid);w.m.g.sv.setPov(this.pov);w.m.g.sv.setVisible(true)}else{w.m.g.sv.setPosition(new google.maps.LatLng(parseFloat(this.y),parseFloat(this.x)));w.m.g.sv.setVisible(true)}}))}else{if(o.type!="poly"){if(o.clickFunc){o.eventHandler=google.maps.event.addListener(o.marker,"click",o.clickFunc)}if(parseInt(w.m.g.mc.style.top)>=0){o.marker.setMap(w.m.g.map)}}}}}});for(var c=0;c<w.m.g.radars.length;c++){var h=w.m.g.radars[c];h.googleLayer=new w.m.g.customLayer(new google.maps.LatLng(parseFloat(h.y),parseFloat(h.x)),w.m.g.map,{type:"radar",target:h})}for(var e=0;e<w.m.g.hotspots.length;e++){var l=null;var g=w.m.g.hotspots[e];if(g.type=="common"||g.type=="streetview"){l=new google.maps.Marker({position:new google.maps.LatLng(parseFloat(g.y),parseFloat(g.x)),map:w.m.g.map,icon:g.common,title:g.tip})}else{if(g.type=="poly"){l=new w.m.g.customLayer(new google.maps.LatLng(parseFloat(g.y),parseFloat(g.x)),w.m.g.map,{type:"hotspot",target:g})}}g.marker=l;var b=false;for(var m=0;m<g.clickActions.length;m++){var a=g.clickActions[m];if(a.clickFunc){if(a.clickFunc.indexOf("|")>0){if(b===false){w.p.sta=a.clickFunc.split("|")[1];a.clickFunc=w.c.hc(g,w.c.e.toggle,a);if(k=="pc"){g.target[a6]("mousedown",w.c.e.se,false)}else{g.target[a6]("touchstart",w.c.e.se,false)}b=true}}else{if(a.clickFunc=="displayFunc"&&a.widgetid){a.clickFunc=w.c.hc(g,function(i){w.widget.content[i.widgetid].displayFunc(i.clickParam[i.widgetid],this,i.position,i.fxtype,i.fxeffect,i.duration)},a)}else{if(a.clickFunc=="displayOrHideFunc"&&a.widgetid){a.clickFunc=w.c.hc(g,function(i){w.widget.content[i.widgetid].displayOrHideFunc(i.clickParam[i.widgetid],this,i.position,i.fxtype,i.fxeffect,i.duration)},a)}else{if(a.clickParam&&(typeof(a.clickParam).toLowerCase()=="string")){a.clickParam=JSONObject.parse(a.clickParam)}a.clickFunc=w.c.hc(g,w.c.e[a.clickFunc],a.clickParam)}}}}}g.clickFunc=w.c.hc(g,function(){for(var j=0;j<this.clickActions.length;j++){if(this.clickActions[j].clickFunc){this.clickActions[j].clickFunc()}}});if(k=="pc"){g.eventHandler=google.maps.event.addListener(g.marker,"click",g.clickFunc)}else{g.eventHandler=google.maps.event.addListener(g.marker,"touchend",g.clickFunc)}}if(w.m.g.mctype=="mainwindow"){setTimeout(w.m.g.display,500)}};w.m.g.display=function(){w.m.g.mapstate="display";w.m.g.rz()};w.m.g.hide=function(){w.m.g.mapstate="hide";w.m.g.mc.style.top="-5000px";w.m.g.mc.style.left="-5000px"};w.m.g.rz=function(){var a=w.c.b.e;if(w.m.g.mctype=="mainwindow"){if(w.twmode=="fullscreen"){if(w.m.g.relativeposition){w.m.g.mc.style.height=w.m.g.prop.height+"px";w.m.g.mc.style.width=w.m.g.prop.width+"px";switch(w.m.g.relativeposition){case 1:w.m.g.mc.style.top=(0+w.m.g.prop.top)+"px";w.m.g.mc.style.left=(0+w.m.g.prop.left)+"px";break;case 2:w.m.g.mc.style.top=(0+w.m.g.prop.top)+"px";w.m.g.mc.style.left=(Math.round(d[a4][a9]/2)+w.m.g.prop.left)+"px";break;case 3:w.m.g.mc.style.top=(0+w.m.g.prop.top)+"px";w.m.g.mc.style.left=(d[a4][a9]+w.m.g.prop.left)+"px";break;case 4:w.m.g.mc.style.top=(Math.round(d[a4][a8]/2)+w.m.g.prop.top)+"px";w.m.g.mc.style.left=(0+w.m.g.prop.left)+"px";break;case 5:w.m.g.mc.style.top=(Math.round(d[a4][a8]/2)+w.m.g.prop.top)+"px";w.m.g.mc.style.left=(Math.round(d[a4][a9]/2)+w.m.g.prop.left)+"px";break;case 6:w.m.g.mc.style.top=(Math.round(d[a4][a8]/2)+w.m.g.prop.top)+"px";w.m.g.mc.style.left=(d[a4][a9]+w.m.g.prop.left)+"px";break;case 7:w.m.g.mc.style.top=(d[a4][a8]+w.m.g.prop.top)+"px";w.m.g.mc.style.left=(0+w.m.g.prop.left)+"px";break;case 8:w.m.g.mc.style.top=(d[a4][a8]+w.m.g.prop.top)+"px";w.m.g.mc.style.left=(Math.round(d[a4][a9]/2)+w.m.g.prop.left)+"px";break;case 9:w.m.g.mc.style.top=(d[a4][a8]+w.m.g.prop.top)+"px";w.m.g.mc.style.left=(d[a4][a9]+w.m.g.prop.left)+"px";break}}else{w.m.g.mc.style.height=d[a4][a8]+"px";w.m.g.mc.style.width=d[a4][a9]+"px";w.m.g.mc.style.top="0px";w.m.g.mc.style.left="0px"}}else{w.m.g.mc.style.height=w.m.g.prop.height+"px";w.m.g.mc.style.width=w.m.g.prop.width+"px";w.m.g.mc.style.top=w.m.g.prop.top+"px";w.m.g.mc.style.left=w.m.g.prop.left+"px"}}else{if(w.m.g.mctype=="popwindow"){w.m.g.mc.style.height=w.m.g.prop.height+"px";w.m.g.mc.style.width=w.m.g.prop.width+"px";w.m.g.mc.style.top="0px";w.m.g.mc.style.left="0px"}}};w.m.c={};w.m.c.map=function(){};w.m.c.mc=d[a2]("div");w.m.c.maps={};w.m.c.isDisplay=false;w.m.c.moveTarget=null;w.m.c.init=function(){var k=w.c.b.e;var j=w.m.c.mc;var b=document.createElement("div");b.style.position="absolute";b.style.height="100%";b.style.width="100%";b.style.overflow="hidden";if(w.m.c.prop.bgcolor){j.style.backgroundColor=w.m.c.prop.bgcolor}if(w.m.c.prop.border){j.style.border="solid 1px "+w.m.c.prop.border}if(w.m.c.prop.opacity){j.style.opacity=parseFloat(w.m.c.prop.opacity)}for(__ in w.m.c.maps){var l=d[a2]("div");l.style.webkitUserSelect="none";l.style.position="absolute";l.style.height=w.m.c.maps[__].height;l.style.width=w.m.c.maps[__].width;var e=d[a2]("canvas");e.height=w.m.c.maps[__].height;e.width=w.m.c.maps[__].width;l.appendChild(e);w.m.c.maps[__].cv=e;w.m.c.maps[__].mc=l;var f=document.createElement("img");f.src=w.m.c.maps[__].bgimage;f[a6]("load",w.c.hc(this,w.m.c.lm,f,w.m.c.maps[__]),false);for(var h=0;h<w.m.c.maps[__].radars.length;h++){l[a3](w.m.c.maps[__].radars[h].container)}for(var h=0;h<w.m.c.maps[__].hotspots.length;h++){var n=w.m.c.maps[__].hotspots[h];var g=d[a2]("div");g.style.position="absolute";g.style.height=n.height;g.style.width=n.width;g.style.top=n.top;g.style.left=n.left;g.style.cursor="pointer";g.style.background="url("+n.common+") no-repeat center center";n.target=g;n.srcElement=g;var c=false;for(var m=0;m<n.clickActions.length;m++){var a=n.clickActions[m];if(a.clickFunc){if(a.clickFunc.indexOf("|")>0){if(c===false){w.p.sta=a.clickFunc.split("|")[1];a.clickFunc=w.c.hc(n,w.c.e.toggle,a);if(k=="pc"){n.target[a6]("mousedown",w.c.e.se,false)}else{n.target[a6]("touchstart",w.c.e.se,false)}c=true}}else{if(a.clickFunc=="displayFunc"&&a.widgetid){a.clickFunc=w.c.hc(n,function(i){w.widget.content[i.widgetid].displayFunc(i.clickParam[i.widgetid],this,i.position,i.fxtype,i.fxeffect,i.duration)},a)}else{if(a.clickFunc=="displayOrHideFunc"&&a.widgetid){a.clickFunc=w.c.hc(n,function(i){w.widget.content[i.widgetid].displayOrHideFunc(i.clickParam[i.widgetid],this,i.position,i.fxtype,i.fxeffect,i.duration)},a)}else{if(a.clickParam&&(typeof(a.clickParam).toLowerCase()=="string")){a.clickParam=JSONObject.parse(a.clickParam)}a.clickFunc=w.c.hc(n,w.c.e[a.clickFunc],a.clickParam)}}}}}n.clickFunc=w.c.hc(n,function(){for(var o=0;o<this.clickActions.length;o++){if(this.clickActions[o].clickFunc){this.clickActions[o].clickFunc()}}});if(k=="pc"){n.target.addEventListener("click",n.clickFunc,false)}else{n.target.addEventListener("touchend",n.clickFunc,false)}l[a3](g);if(n.text){var f=d[a2]("img");f.src=n.text;f.style.position="absolute";l[a3](f);f[a6]("load",w.c.hc(f,w.m.c.textPosition,{top:n.top,left:n.left,height:n.height,width:n.width,textpos:n.textpos}),false)}}b.appendChild(l)}j.appendChild(b);d.body.appendChild(j);if(this.mctype=="mainwindow"){setTimeout(w.m.c.display,500)}j.addEventListener("touchmove",w.c.e.se,false)};w.m.c.textPosition=function(c){c.height=parseInt(c.height);c.width=parseInt(c.width);c.top=parseInt(c.top);c.left=parseInt(c.left);var a=0,b=0;switch(c.textpos.toLowerCase()){case"left":a=c.left-this.width;b=c.top-Math.round((this.height-c.height)/2);break;case"right":a=(c.left+c.width);b=c.top-Math.round((this.height-c.height)/2);break;case"top":a=c.left-Math.round((this.width-c.width)/2);b=c.top-this.height;break;case"bottom":a=c.left-Math.round((this.width-c.width)/2);b=c.top+c.height;break}this.style.top=b+"px";this.style.left=a+"px"};w.m.c.display=function(){w.m.c.mapstate="display";w.m.c.rz();w.m.c.rc()};w.m.c.hide=function(){w.m.c.mapstate="hide";w.m.c.mc.style.top="-5000px";w.m.c.mc.style.left="-5000px"};w.m.c.rz=function(){var a=w.c.b.e;if(w.m.c.mctype=="mainwindow"){if(w.twmode=="fullscreen"){if(w.m.c.relativeposition){w.m.c.mc.style.height=w.m.c.prop.height+"px";w.m.c.mc.style.width=w.m.c.prop.width+"px";switch(w.m.c.relativeposition){case 1:w.m.c.mc.style.top=(0+w.m.c.prop.top)+"px";w.m.c.mc.style.left=(0+w.m.c.prop.left)+"px";break;case 2:w.m.c.mc.style.top=(0+w.m.c.prop.top)+"px";w.m.c.mc.style.left=(Math.round(d[a4][a9]/2)+w.m.c.prop.left)+"px";break;case 3:w.m.c.mc.style.top=(0+w.m.c.prop.top)+"px";w.m.c.mc.style.left=(d[a4][a9]+w.m.c.prop.left)+"px";break;case 4:w.m.c.mc.style.top=(Math.round(d[a4][a8]/2)+w.m.c.prop.top)+"px";w.m.c.mc.style.left=(0+w.m.c.prop.left)+"px";break;case 5:w.m.c.mc.style.top=(Math.round(d[a4][a8]/2)+w.m.c.prop.top)+"px";w.m.c.mc.style.left=(Math.round(d[a4][a9]/2)+w.m.c.prop.left)+"px";break;case 6:w.m.c.mc.style.top=(Math.round(d[a4][a8]/2)+w.m.c.prop.top)+"px";w.m.c.mc.style.left=(d[a4][a9]+w.m.c.prop.left)+"px";break;case 7:w.m.c.mc.style.top=(d[a4][a8]+w.m.c.prop.top)+"px";w.m.c.mc.style.left=(0+w.m.c.prop.left)+"px";break;case 8:w.m.c.mc.style.top=(d[a4][a8]+w.m.c.prop.top)+"px";w.m.c.mc.style.left=(Math.round(d[a4][a9]/2)+w.m.c.prop.left)+"px";break;case 9:w.m.c.mc.style.top=(d[a4][a8]+w.m.c.prop.top)+"px";w.m.c.mc.style.left=(d[a4][a9]+w.m.c.prop.left)+"px";break}}else{w.m.c.mc.style.height=d[a4][a8]+"px";w.m.c.mc.style.widt=d[a4][a8]+"px";w.m.c.mc.style.top="0px";w.m.c.mc.style.left="0px"}}else{w.m.c.mc.style.height=w.m.c.prop.height+"px";w.m.c.mc.style.widt=w.m.c.prop.width+"px";w.m.c.mc.style.top=w.m.c.prop.top+"px";w.m.c.mc.style.left=w.m.c.prop.left+"px"}}else{if(w.m.c.mctype=="popwindow"){w.m.c.mc.style.height=w.m.c.prop.height+"px";w.m.c.mc.style.width=w.m.c.prop.width+"px";w.m.c.mc.style.top="0px";w.m.c.mc.style.left="0px"}}};w.m.c.rc=function(){var g=false;var b=false;var k="";for(__ in w.m.c.maps){w.m.c.maps[__].mc.style.display="none";if(w.cs){if(__==w.cs.mapid){k=__;b=true}}}if(!(b)){for(__ in w.m.c.maps){k=__;break}}w.m.c.moveTarget=w.m.c.maps[k];w.m.c.moveTarget.mc.style.display="block";if(w.m.c.maps[k].height>w.m.c.mc.clientHeight){g=true;w.m.c.maps[k].mc.style.top="0px"}else{w.m.c.maps[k].mc.style.top=Math.round((w.m.c.mc.clientHeight-w.m.c.maps[k].height)/2)+"px"}if(w.m.c.maps[k].width>w.m.c.mc.clientWidth){g=true;w.m.c.maps[k].mc.style.left="0px"}else{w.m.c.maps[k].mc.style.left=Math.round((w.m.c.mc.clientWidth-w.m.c.maps[k].width)/2)+"px"}var l=w.m.c.maps[k].height;var a=w.m.c.maps[k].width;var n=null;var e=null;if(g){if(w.c.b.e=="iphone"||w.c.b.e=="ipad"){w.m.c.maps[k].moveEventFunc=w.m.c.touchstartFunc;w.m.c.maps[k].mc[a6]("touchstart",w.m.c.maps[k].moveEventFunc,false)}else{w.m.c.maps[k].moveEventFunc=w.m.c.mousedownFunc;w.m.c.maps[k].mc[a6]("mousedown",w.m.c.maps[k].moveEventFunc,false)}if(w.cs&&w.m.c.maps[w.cs.mapid]){n=w.m.c.maps[w.cs.mapid].radars;for(var h=0;h<n.length;h++){if(w.cs.id==n[h].sceneid){e=n[h];break}}}if(e){var m=w.m.c.mc[a8];var c=w.m.c.mc[a9];e.x=parseInt(e.x);e.y=parseInt(e.y);var j=0;var f=0;j=Math.round(c/2)-e.x;if(j>0){if(w.m.c.maps[k].width>w.m.c.mc.clientWidth){w.m.c.moveTarget.mc.style.left=0+"px"}}else{if(j<(c-a)){w.m.c.moveTarget.mc.style.left=(c-a)+"px"}else{w.m.c.moveTarget.mc.style.left=j+"px"}}f=Math.round(m/2)-e.y;if(f>0){if(w.m.c.maps[k].height>w.m.c.mc.clientHeight){w.m.c.moveTarget.mc.style.top=0+"px"}}else{if(f<(m-l)){w.m.c.moveTarget.mc.style.top=(m-l)+"px"}else{w.m.c.moveTarget.mc.style.top=f+"px"}}}}};w.m.c.lm=function(a,b){if(a&&b){b=b.cv;b.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,b.width,b.height)}};w.m.c.s_x=0;w.m.c.s_y=0;w.m.c.touchstartFunc=function(a){w.m.c.s_x=a.targetTouches[0].clientX;w.m.c.s_y=a.targetTouches[0].clientY;w.m.c.mc[a6]("touchmove",w.m.c.touchmoveFunc,false);w.m.c.mc[a6]("touchend",w.m.c.touchendFunc,false);d.body[a6]("touchend",w.m.c.mouseupFunc,false)};w.m.c.mousedownFunc=function(a){w.m.c.s_x=a.clientX;w.m.c.s_y=a.clientY;window.getSelection().removeAllRanges();w.m.c.mc[a6]("mousemove",w.m.c.mousemoveFunc,false);w.m.c.mc[a6]("mouseup",w.m.c.mouseupFunc,false);d[a6]("mouseup",w.m.c.mouseupFunc,false);w.c.e.se(a)};w.m.c.moveFunc=function(c,b){var a=w.m.c.moveTarget.mc;var h=(parseInt(a.style.top)+(b-w.m.c.s_y));var f=(parseInt(a.style.left)+(c-w.m.c.s_x));var g=(w.m.c.mc[a8]-a[a8]);var e=(w.m.c.mc[a9]-a[a9]);if(g>0){}else{if(h>0){a.style.top=0+"px"}else{if(h<g){a.style.top=g+"px"}else{a.style.top=h+"px"}}}if(e>0){}else{if(f>0){a.style.left=0+"px"}else{if(f<e){a.style.left=e+"px"}else{a.style.left=f+"px"}}}w.m.c.s_x=c;w.m.c.s_y=b};w.m.c.touchmoveFunc=function(a){w.m.c.moveFunc(a.targetTouches[0].clientX,a.targetTouches[0].clientY);w.c.e.se(a)};w.m.c.mousemoveFunc=function(a){w.m.c.moveFunc(a.clientX,a.clientY);w.c.e.se(a)};w.m.c.touchendFunc=function(a){w.m.c.mc[a7]("touchmove",w.m.c.touchmoveFunc,false);w.m.c.mc[a7]("touchend",w.m.c.touchendFunc,false)};w.m.c.mouseupFunc=function(){w.m.c.mc[a7]("mousemove",w.m.c.mousemoveFunc,false);w.m.c.mc[a7]("mouseup",w.m.c.mouseupFunc,false);d[a7]("mouseup",w.m.c.mouseupFunc,false)};w.b={};w.b.buttons=[];w.b.a=function(){this.id="";this.height=0;this.width=0;this.top=0;this.left=0;this.common="";this.hover=""};w.b.a.prototype={clickFunc:null,clickParam:null,init:function(){var e=w.c.b.e;var c;if(this.common.length>0&&this.hover.length>0){c=d[a2]("img");c.src=this.common}else{c=d[a2]("div");c.style.height=this.height+"px";c.style.width=this.width+"px";c.innerHTML=this.text;c.style.color=this.fontColor;c.style.fontSize=this.fontSize;c.style.fontFamily=this.fontFamily}if(this.isAlign==2){c.style.textAlign="center"}else{if(this.isAlign==3){c.style.textAlign="right"}}if(this.isBold){c.style.fontWeight=700}if(this.isItalic){c.style.fontStyle="italic"}if(this.common){c.style.background="url('"+this.common+"')"}this.srcElement=c;if(this.isToggle=="true"){this.isToggle="common"}else{this.isToggle=""}c.id=this.id;c.style.position="absolute";c.style.zIndex=parseInt(this.zindex);c.style.cursor="pointer";c.style.opacity=this.opacity;this.resizePosition(c);this.target=c;var b=false;for(var a=0;a<this.clickActions.length;a++){var f=this.clickActions[a];if(f.clickFunc){if(f.clickFunc.indexOf("|")>0){if(b===false){w.p.sta=f.clickFunc.split("|")[1];f.clickFunc=w.c.hc(this,w.c.e.toggle,f);if(e=="pc"){this.target[a6]("mousedown",w.c.e.se,false)}else{this.target[a6]("touchstart",w.c.e.se,false)}b=true}}else{if(f.clickFunc=="displayFunc"&&f.widgetid){f.clickFunc=w.c.hc(this,function(g){w.widget.content[g.widgetid].displayFunc(g.clickParam[g.widgetid],this,g.position,g.fxtype,g.fxeffect,g.duration)},f)}else{if(f.clickFunc=="displayOrHideFunc"&&f.widgetid){f.clickFunc=w.c.hc(this,function(g){w.widget.content[g.widgetid].displayOrHideFunc(g.clickParam[g.widgetid],this,g.position,g.fxtype,g.fxeffect,g.duration)},f)}else{if(f.clickParam&&(typeof(f.clickParam).toLowerCase()=="string")){f.clickParam=JSONObject.parse(f.clickParam)}f.clickFunc=w.c.hc(this,w.c.e[f.clickFunc],f.clickParam)}}}}}this.clickFunc=w.c.hc(this,function(){if(this.common.length>0&&this.hover.length>0){if(this.isToggle=="common"){this.srcElement.src="url('"+this.hover+"')";this.isToggle="hover"}else{if(this.isToggle=="hover"){this.srcElement.src="url('"+this.common+"')";this.isToggle="common"}}}for(var g=0;g<this.clickActions.length;g++){if(this.clickActions[g].clickFunc){setTimeout(this.clickActions[g].clickFunc)}}});if(e=="pc"){this.target.addEventListener("click",this.clickFunc,false)}else{this.target.addEventListener("touchend",this.clickFunc,false)}if(this.type=="mainwindow"){d.body[a3](c)}else{w.tw.popWindowButtons.push(this)}},resizePosition:function(a){if(this.type=="mainwindow"){if(w.twmode=="fullscreen"){if(this.relativeposition){a.style.height=this.height+"px";a.style.width=this.width+"px";switch(this.relativeposition){case 1:a.style.top=(0+this.top)+"px";a.style.left=(0+this.left)+"px";break;case 2:a.style.top=(0+this.top)+"px";a.style.left=(Math.round(d[a4][a9]/2)+this.left)+"px";break;case 3:a.style.top=(0+this.top)+"px";a.style.left=(d[a4][a9]+this.left)+"px";break;case 4:a.style.top=(Math.round(d[a4][a8]/2)+this.top)+"px";a.style.left=(0+this.left)+"px";break;case 5:a.style.top=(Math.round(d[a4][a8]/2)+this.top)+"px";a.style.left=(Math.round(d[a4][a9]/2)+this.left)+"px";break;case 6:a.style.top=(Math.round(d[a4][a8]/2)+this.top)+"px";a.style.left=(d[a4][a9]+this.left)+"px";break;case 7:a.style.top=(d[a4][a8]+this.top)+"px";a.style.left=(0+this.left)+"px";break;case 8:a.style.top=(d[a4][a8]+this.top)+"px";a.style.left=(Math.round(d[a4][a9]/2)+this.left)+"px";break;case 9:a.style.top=(d[a4][a8]+this.top)+"px";a.style.left=(d[a4][a9]+this.left)+"px";break}}else{a.style.height=d[a4][a8]+"px";a.style.widt=d[a4][a8]+"px";a.style.top="0px";a.style.left="0px"}}else{a.style.height=this.height+"px";a.style.widt=this.width+"px";a.style.top=this.top+"px";a.style.left=this.left+"px"}}else{if(w.m.c.mctype=="popwindow"){a.style.height=this.height+"px";a.style.widt=this.width+"px";a.style.top="0px";a.style.left="0px"}}}};w.b.event={};w.text={};w.text.i={};w.text.a=function(){};w.text.a.prototype={clickFunc:"",clickParam:"",init:function(){w.text.i[this.id]=this;var a=document.createElement("div");a.style.position="absolute";if(w.c.b.e!="pc"){a.addEventListener("touchmove",w.c.e.se,false)}if(this.zindex){a.style.zIndex=parseInt(this.zindex)}a.style.height=this.height+"px";a.style.width=this.width+"px";a.style.overflow="auto";this.resizePosition(a);a.innerHTML=this.text;if(this.isWrap){a.style.wordWrap="break-word"}else{a.style.whiteSpace="nowrap"}if(this.isBold){a.style.fontWeight=700}if(this.isItalic){a.style.fontStyle="italic"}if(this.fontFamily){a.style.fontFamily=this.fontFamily}if(this.fontSize){a.style.fontSize=this.fontSize+"pt"}if(this.fontColor){a.style.color=this.fontColor}if(this.textAlign){a.style.textAlign=this.textAlign}if(this.opacity){a.style.opacity=this.opacity}switch(this.underline){case 0:a.style.textDecoration="underline";break;case 1:if(w.c.b.e=="pc"){a.addEventListener("mouseover",function(f){f.target.style.textDecoration="underline"});a.addEventListener("mouseout",function(f){f.target.style.textDecoration="none"})}break;case 2:a.style.textDecoration="none"}this.target=a;var c=false;for(var b=0;b<this.clickActions.length;b++){var e=this.clickActions[b];if(e.clickFunc){if(e.clickFunc.indexOf("|")>0){if(c===false){w.p.sta=e.clickFunc.split("|")[1];e.clickFunc=w.c.hc(this,w.c.e.toggle,e);if(_eq=="pc"){this.target[a6]("mousedown",w.c.e.se,false)}else{this.target[a6]("touchstart",w.c.e.se,false)}c=true}}else{if(e.clickFunc=="displayFunc"&&e.widgetid){e.clickFunc=w.c.hc(this,function(f){w.widget.content[f.widgetid].displayFunc(f.clickParam[f.widgetid],this,f.position,f.fxtype,f.fxeffect,f.duration)},e)}else{if(e.clickFunc=="displayOrHideFunc"&&e.widgetid){e.clickFunc=w.c.hc(this,function(f){w.widget.content[f.widgetid].displayOrHideFunc(f.clickParam[f.widgetid],this,f.position,f.fxtype,f.fxeffect,f.duration)},e)}else{if(e.clickParam&&(typeof(e.clickParam).toLowerCase()=="string")){e.clickParam=JSONObject.parse(e.clickParam)}e.clickFunc=w.c.hc(this,w.c.e[e.clickFunc],e.clickParam)}}}}}this.clickFunc=w.c.hc(this,function(){for(var f=0;f<this.clickActions.length;f++){if(this.clickActions[f].clickFunc){setTimeout(this.clickActions[f].clickFunc)}}});if(w.c.b.e=="pc"){this.target.addEventListener("click",this.clickFunc,false);if(this.clickActions.length>0){this.target.style.color=this.common;this.target.addEventListener("mouseover",w.c.hc(this,function(){this.target.style.color=this.hover}),false);this.target.addEventListener("mouseout",w.c.hc(this,function(){this.target.style.color=this.common}),false);this.target.style.cursor="pointer"}}else{this.target.addEventListener("touchend",this.clickFunc,false);if(this.clickActions.length>0){this.target.style.color=this.common;this.target.addEventListener("touchstart",w.c.hc(this,function(){this.target.style.color=this.hover}),false);this.target.addEventListener("touchend",w.c.hc(this,function(){this.target.style.color=this.common}),false);this.target.style.webkieUserSelect="none"}}d.body.appendChild(a)},resizePosition:function(a){if(this.type=="mainwindow"){if(this.relativePosition){switch(this.relativePosition){case 1:a.style.top=(0+this.top)+"px";a.style.left=(0+this.left)+"px";break;case 2:a.style.top=(0+this.top)+"px";a.style.left=(Math.round(d[a4][a9]/2)+this.left)+"px";break;case 3:a.style.top=(0+this.top)+"px";a.style.left=(d[a4][a9]+this.left)+"px";break;case 4:a.style.top=(Math.round(d[a4][a8]/2)+this.top)+"px";a.style.left=(0+this.left)+"px";break;case 5:a.style.top=(Math.round(d[a4][a8]/2)+this.top)+"px";a.style.left=(Math.round(d[a4][a9]/2)+this.left)+"px";break;case 6:a.style.top=(Math.round(d[a4][a8]/2)+this.top)+"px";a.style.left=(d[a4][a9]+this.left)+"px";break;case 7:a.style.top=(d[a4][a8]+this.top)+"px";a.style.left=(0+this.left)+"px";break;case 8:a.style.top=(d[a4][a8]+this.top)+"px";a.style.left=(Math.round(d[a4][a9]/2)+this.left)+"px";break;case 9:a.style.top=(d[a4][a8]+this.top)+"px";a.style.left=(d[a4][a9]+this.left)+"px";break}}else{a.style.top=this.top+"px";a.style.left=this.left+"px"}}else{a.style.top="-5000px";a.style.left="-5000px"}}};w.txa={};w.txa.i={};w.txa.a=function(){};w.txa.a.prototype={init:function(){w.txa.i[this.id]=this;var a=document.createElement("div");a.style.position="absolute";if(w.c.b.e!="pc"){a.addEventListener("touchmove",w.c.e.se,false)}if(this.zindex){a.style.zIndex=parseInt(this.zindex)}a.style.height=this.height+"px";a.style.width=this.width+"px";d.body.appendChild(a);this.resizePosition(a);a.style.overflow="auto";this.imgc=document.createElement("img");this.imgc.style.webkitUserSelect="none";this.textc=document.createElement("div");this.mc=a;a.appendChild(this.imgc);a.appendChild(this.textc);if(this.bgcolor){a.style.backgroundColor=this.bgcolor}if(this.bordercolor){a.style.border="solid 1px "+this.bordercolor}if(this.opacity){a.style.opacity=this.opacity}if(this.color){this.textc.style.color=this.color}if(this.fontFamily){this.textc.style.fontFamily=this.fontFamily}if(this.fontSize){this.textc.style.fontSize=this.fontSize}if(this.isBold){this.textc.style.fontWieght=700}if(this.isItalic){this.textc.style.fontStyle="italic"}this.textc.style.width=this.width+"px";this.textc.style.overflow="auto";if(this.isWrap){this.textc.style.wordWrap="break-word"}else{this.textc.style.whiteSpace="nowrap"}if(this.textAlign){this.textc.style.textAlign=this.textAlign}w.txa.cc(this.id)},resizePosition:function(a){if(this.type=="mainwindow"){if(this.relativePosition){switch(this.relativePosition){case 1:a.style.top=(0+this.top)+"px";a.style.left=(0+this.left)+"px";break;case 2:a.style.top=(0+this.top)+"px";a.style.left=(Math.round(d[a4][a9]/2)+this.left)+"px";break;case 3:a.style.top=(0+this.top)+"px";a.style.left=(d[a4][a9]+this.left)+"px";break;case 4:a.style.top=(Math.round(d[a4][a8]/2)+this.top)+"px";a.style.left=(0+this.left)+"px";break;case 5:a.style.top=(Math.round(d[a4][a8]/2)+this.top)+"px";a.style.left=(Math.round(d[a4][a9]/2)+this.left)+"px";break;case 6:a.style.top=(Math.round(d[a4][a8]/2)+this.top)+"px";a.style.left=(d[a4][a9]+this.left)+"px";break;case 7:a.style.top=(d[a4][a8]+this.top)+"px";a.style.left=(0+this.left)+"px";break;case 8:a.style.top=(d[a4][a8]+this.top)+"px";a.style.left=(Math.round(d[a4][a9]/2)+this.left)+"px";break;case 9:a.style.top=(d[a4][a8]+this.top)+"px";a.style.left=(d[a4][a9]+this.left)+"px";break}}else{a.style.top=this.top+"px";a.style.left=this.left+"px"}}else{a.style.top="-5000px";a.style.left="-5000px"}}};w.txa.cc=function(e,b){if(e){var c=w.txa.i[e].contents;for(var a=0;a<c.length;a++){if(c[a].id=="none"){if(c[a].ctype=="image"){w.txa.i[e].imgc.style.display="block";w.txa.i[e].textc.style.display="none";w.txa.i[e].imgc.src=c[a].content;break}else{w.txa.i[e].imgc.style.display="none";w.txa.i[e].textc.style.display="block";w.txa.i[e].textc.innerHTML=c[a].content;break}}}}else{for(__ in w.txa.i){w.txa.i[__].mc.style.display="none";var c=w.txa.i[__].contents;for(var a=0;a<c.length;a++){if(b=="scene"){if(c[a].id==w.cs.id){w.txa.i[__].mc.style.display="block";if(c[a].ctype=="image"){w.txa.i[__].imgc.style.display="block";w.txa.i[__].textc.style.display="none";w.txa.i[__].imgc.src=c[a].content}else{w.txa.i[__].imgc.style.display="none";w.txa.i[__].textc.style.display="block";w.txa.i[__].textc.innerHTML=c[a].content}break}}if(c[a].id=="none"){w.txa.i[__].mc.style.display="block";if(c[a].ctype=="image"){w.txa.i[__].imgc.style.display="block";w.txa.i[__].textc.style.display="none";w.txa.i[__].imgc.src=c[a].content}else{w.txa.i[__].imgc.style.display="none";w.txa.i[__].textc.style.display="block";w.txa.i[__].textc.innerHTML=c[a].content}}}}}};w.img={};w.img.i={};w.img.a=function(){};w.img.a.prototype={init:function(){w.img.i[this.id]=this;var a=document.createElement("div");a.style.overflow="hidden";if(w.c.b.e!="pc"){a.addEventListener("touchmove",w.c.e.se,false)}var b=document.createElement("img");b.src=this.src;b.addEventListener("load",w.c.hc(this,this.loadimg),false);var g=document.createElement("canvas");g.style.position="absolute";a.appendChild(g);this.img=b;this.mc=a;this.canvas=g;a.style.position="absolute";if(this.zindex){a.style.zIndex=parseInt(this.zindex)}a.style.height=this.height+"px";a.style.width=this.width+"px";a.style.opacity=this.opacity;this.target=a;var e=false;for(var c=0;c<this.clickActions.length;c++){var f=this.clickActions[c];if(f.clickFunc){if(f.clickFunc.indexOf("|")>0){if(e===false){w.p.sta=f.clickFunc.split("|")[1];f.clickFunc=w.c.hc(this,w.c.e.toggle,f);if(_eq=="pc"){this.target[a6]("mousedown",w.c.e.se,false)}else{this.target[a6]("touchstart",w.c.e.se,false)}e=true}}else{if(f.clickFunc=="displayFunc"&&f.widgetid){f.clickFunc=w.c.hc(this,function(h){w.widget.content[h.widgetid].displayFunc(h.clickParam[h.widgetid],this,h.position,h.fxtype,h.fxeffect,h.duration)},f)}else{if(f.clickFunc=="displayOrHideFunc"&&f.widgetid){f.clickFunc=w.c.hc(this,function(h){w.widget.content[h.widgetid].displayOrHideFunc(h.clickParam[h.widgetid],this,h.position,h.fxtype,h.fxeffect,h.duration)},f)}else{if(f.clickParam&&(typeof(f.clickParam).toLowerCase()=="string")){f.clickParam=JSONObject.parse(f.clickParam)}f.clickFunc=w.c.hc(this,w.c.e[f.clickFunc],f.clickParam)}}}}}this.clickFunc=w.c.hc(this,function(){for(var h=0;h<this.clickActions.length;h++){if(this.clickActions[h].clickFunc){setTimeout(this.clickActions[h].clickFunc)}}});if(w.c.b.e=="pc"){this.target.addEventListener("click",this.clickFunc,false)}else{this.target.addEventListener("touchend",this.clickFunc,false)}d.body.appendChild(a);this.resizePosition(a)},loadimg:function(){if(this.sizeMode=="Actual Size"){this.canvas.height=this.img.height;this.canvas.width=this.img.width;if(this.isCenter){this.canvas.style.top=Math.round((this.height-this.img.height)/2)+"px";this.canvas.style.left=Math.round((this.width-this.img.width)/2)+"px"}else{this.canvas.style.top="0px";this.canvas.style.left="0px"}}else{var b=this.height/this.img.height;var a=this.width/this.img.width;if(b<a){this.canvas.height=this.height;this.canvas.width=this.img.width*b;this.canvas.style.top="0px";this.canvas.style.left=Math.round((this.width-this.canvas.width)/2)+"px"}else{this.canvas.width=this.width;this.canvas.height=this.img.height*a;this.canvas.style.left="0px";this.canvas.style.top=Math.round((this.height-this.canvas.height)/2)+"px"}}this.canvas.getContext("2d").drawImage(this.img,0,0,this.img.width,this.img.height,0,0,this.canvas.width,this.canvas.height)},resizePosition:function(a){if(this.type=="mainwindow"){if(this.relativePosition){switch(this.relativePosition){case 1:a.style.top=(0+this.top)+"px";a.style.left=(0+this.left)+"px";break;case 2:a.style.top=(0+this.top)+"px";a.style.left=(Math.round(d[a4][a9]/2)+this.left)+"px";break;case 3:a.style.top=(0+this.top)+"px";a.style.left=(d[a4][a9]+this.left)+"px";break;case 4:a.style.top=(Math.round(d[a4][a8]/2)+this.top)+"px";a.style.left=(0+this.left)+"px";break;case 5:a.style.top=(Math.round(d[a4][a8]/2)+this.top)+"px";a.style.left=(Math.round(d[a4][a9]/2)+this.left)+"px";break;case 6:a.style.top=(Math.round(d[a4][a8]/2)+this.top)+"px";a.style.left=(d[a4][a9]+this.left)+"px";break;case 7:a.style.top=(d[a4][a8]+this.top)+"px";a.style.left=(0+this.left)+"px";break;case 8:a.style.top=(d[a4][a8]+this.top)+"px";a.style.left=(Math.round(d[a4][a9]/2)+this.left)+"px";break;case 9:a.style.top=(d[a4][a8]+this.top)+"px";a.style.left=(d[a4][a9]+this.left)+"px";break}}else{a.style.top=this.top+"px";a.style.left=this.left+"px"}}else{a.style.top="-5000px";a.style.left="-5000px"}}};w.ps={};w.ps.xml={};w.ps.xml.loadXML=function(c){if(w.c.b.b=="safari"){var b=d[a2]("link");b.type="text/css";b.rel="stylesheet";b.charset="utf-8";if(w.c.b.e=="iphone"){b.href="style/tws.css"}else{b.href="style/tw.css"}d[a1]("HEAD").item(0)[a3](b);w.cd.a(c);w[a6]("orientationchange",w.wg.orz,false);w[a6]("resize",w.wg.rz,false)}else{var a=d[a2]("div");a.className="divBrowserInfo";a.innerHTML="safari only";d.body[a3](a);w.c.d()}};w.ps.xml.a=function(m){if(w.c.b.e=="iphone"){if(d[a4][a8]>d[a4][a9]){d.body.style.height="417px"}else{d.body.style.height="269px"}}d[a4][a6]("selectstart",w.c.e.se,false);var i=m[a1]("global")[0];var g=i[a5]("isRejusted");var a=i[a5]("type");if(i[a5]("bgcolor")&&i[a5]("bgcolor").length>0){if(i[a5]("bgimage")&&i[a5]("bgimage").length>0){d.body.style.background="url('"+i[a5]("bgimage")+"') no-repeat top left "+i[a5]("bgcolor")}else{d.body.style.backgroundColor=i[a5]("bgcolor")}}w.twmode=i[a5]("mode");if(i[a5]("hasTB")=="true"){w.twToolBar=true}else{w.twToolBar=false}w.ps.xml.pw=i[a1]("widget");var c=i[a1]("view")[0];if(g=="false"){w.ps.xml.b(false,c)}else{w.ps.xml.b(true,c)}var k=m[a1]("scenes")[0][a1]("scene");w.ps.xml.c(k);var e=m[a1]("mapo")[0];w.ps.xml.d(e);var h=m[a1]("thumbnailso")[0];w.ps.xml.f(h);var l=m[a1]("buttons")[0];w.ps.xml.e(l);var b=m[a1]("twtexts")[0];w.ps.xml.tx(b);var f=m[a1]("twtextareas")[0];w.ps.xml.txa(f);var j=m[a1]("twimages")[0];w.ps.xml.img(j);setTimeout(w.ps.xml.initpw,1000)};w.ps.xml.initpw=function(){if(w.ps.xml.pw){for(var a=0;a<w.ps.xml.pw.length;a++){w.wg.parse(w.ps.xml.pw[a])}}};w.ps.xml.b=function(a,c){var b=d[a2]("div");b.style.position="absolute";w.p.prop={};if(c){w.p.type=c[a5]("type");w.p.zindex=parseInt(c[a5]("zindex"));w.p.prop.height=c[a5]("height");w.p.prop.width=c[a5]("width");w.p.prop.top=c[a5]("top");w.p.prop.left=c[a5]("left");w.p.prop.bgcolor=c[a5]("bgcolor");w.p.prop.bgimage=c[a5]("bgimage");if(w.p.type=="mainwindow"){if(w.twmode=="fullscreen"){b.style.height="100%";b.style.width="100%";b.style.top="0px";b.style.left="0px"}else{b.style.height=w.p.prop.height+"px";b.style.width=w.p.prop.width+"px";b.style.top=w.p.prop.top+"px";b.style.left=w.p.prop.left+"px"}}else{if(w.p.type=="popwindow"){b.style.height="100%";b.style.width="100%";b.style.top="-5000px";b.style.left="-5000px"}}if(w.p.type=="mainwindow"||w.p.type=="popwindow"){w.twmc=b;d.body[a3](b);w.p.init(a);w.gs.height="100%";w.gs.width="100%";if(w.p.prop.bgcolor&&w.p.prop.bgcolor.length>0){if(w.p.prop.bgimage&&w.p.prop.bgimage.length>0){w.p.target.style.background="url('"+w.p.prop.bgimage+"') no-repeat center center "+w.p.prop.bgcolor}else{w.p.target.style.backgroundColor=w.p.prop.bgcolor}}w.p.target.style.height=w.gs.height;w.p.target.style.width=w.gs.width;w.p.de.style.height=w.gs.height;w.p.de.style.width=w.gs.width}else{if(a==false){setTimeout(w.wg.wa.startAnimate,1000)}}}w.wg.pw.init()};w.ps.xml.c=function(m){for(var s=0;s<m.length;s++){var u=m[s];var v=new oScene();if(m[s][a5]("id")){v.id=m[s][a5]("id")}else{v.id="scene_"+scenes.length}if(m[s][a5]("mode")){v.control.mode=false}if(isNaN(parseInt(m[s][a5]("speed")))){v.control.speed=0}else{v.control.speed=parseInt(m[s][a5]("speed"))}if(m[s][a5]("effect")){v.effect=m[s][a5]("effect")}var x=u[a1]("preview")[0];if(x[a5]("uri")){v.preImage=x[a5]("uri").replace(/ /g,"%20")}else{v.preImage="images/scene/preview.jpg"}var t=m[s][a1]("viewparam")[0];if(t[a5]("type")!="default"){var a=t[a1]("init")[0];var e=0;e=w.c.intn(a[a5]("pan"),0);e=(180+e);v.camera.cp=v.scene.ip=e;e=w.c.intn(a[a5]("tilt"),0);v.camera.ct=v.scene.it=e;e=w.c.intn(a[a5]("fov"),70);v.camera.cf=v.scene.iz=e;a=t[a1]("min")[0];e=0;e=w.c.intn(a[a5]("pan"),-180);e=(180+e);v.scene.np=e;e=w.c.intn(a[a5]("tilt"),-90);v.scene.nt=e;e=w.c.intn(a[a5]("fov"),30);v.scene.nz=e;a=t[a1]("max")[0];e=0;e=w.c.intn(a[a5]("pan"),180);e=(180+e);v.scene.xp=e;e=w.c.intn(a[a5]("tilt"),90);v.scene.xt=e;e=w.c.intn(a[a5]("fov"),120);v.scene.xz=e}var y=m[s][a1]("images")[0][a5]("type");y=y||"cube";v.type=y.toLowerCase();if(y=="common"){w.p.panel.common.type[v.id]=m[s][a1]("images")[0][a5]("mode")}var c=m[s][a1]("pc")[0][a1]("image");if(w.c.b.e=="iphone"){c=m[s][a1]("moblie")[0][a1]("image")}var b="",o="";for(var r=0;r<c.length;r++){b=c[r][a5]("uri");o=c[r][a5]("type");if(o&&o.length>0){if(b&&b.length>0){v.images[o]=b}else{v.images[o]="images/scene/error.jpg"}}}for(__p in v.images){if(v.images[__p].length==0){v.images[__p]="images/scene/error.jpg"}}w.gs.scenes.push(v);var f=m[s][a1]("hotspots")[0][a1]("hotspot");for(var r=0;r<f.length;r++){var p=new w.hs.a();p.id=f[r][a5]("id");p.pan=f[r][a5]("pan");p.tilt=f[r][a5]("tilt");p.height=f[r][a5]("height");p.width=f[r][a5]("width");p.text=f[r][a5]("text");p.textpos=f[r][a5]("textalign");p.common=f[r][a5]("common").replace(/ /g,"%20");p.hover=f[r][a5]("hover").replace(/ /g,"%20");p.scene=v;p.clickActions=[];if(f[r][a1]("actions")){var g=f[r][a1]("actions")[0][a1]("click");if(g.length>0){for(var h=0;h<g.length;h++){var n={};p.clickActions.push(n);n.clickFunc=g[h][a5]("func");if(g[h][a5]("param")){n.clickParam=g[h][a5]("param")}var l=g[h][a1]("widget");if(l.length>0){n.clickParam={};for(var q=0;q<l.length;q++){w.wg.parse(l[q],p,h)}}}}}if(s==0){p.init()}v.hotspots.push(p)}}};w.ps.xml.d=function(o){var g=o[a1]("google")[0];var A=o[a1]("custom")[0];if(g){if(g[a5]("cx")&&g[a5]("cy")){w.m.g.prop={};w.m.g.prop.height=parseInt(g[a5]("height"));w.m.g.prop.width=parseInt(g[a5]("width"));w.m.g.prop.top=parseInt(g[a5]("top"));w.m.g.prop.left=parseInt(g[a5]("left"));w.m.g.mctype=g[a5]("mctype");w.m.g.relativeposition=parseInt(g[a5]("relativeposition"));w.m.g.cx=g[a5]("cx");w.m.g.cy=g[a5]("cy");w.m.g.zoom=g[a5]("zoom");w.m.g.mc.style.position="absolute";if(g[a5]("zindex")){w.m.g.mc.style.zIndex=parseInt(g[a5]("zindex"))}if(w.m.g.mctype=="mainwindow"){if(w.twmode=="fullscreen"){if(w.m.g.relativeposition){w.m.g.mc.style.height=w.m.g.prop.height+"px";w.m.g.mc.style.width=w.m.g.prop.width+"px";w.m.g.mc.style.top=w.m.g.prop.top+"px";w.m.g.mc.style.left=w.m.g.prop.left+"px"}else{w.m.g.mc.style.height="100%";w.m.g.mc.style.width="100%";w.m.g.mc.style.top="0px";w.m.g.mc.style.left="0px"}}else{w.m.g.mc.style.height=w.m.g.prop.height+"px";w.m.g.mc.style.width=w.m.g.prop.width+"px";w.m.g.mc.style.top=w.m.g.prop.top+"px";w.m.g.mc.style.left=w.m.g.prop.left+"px"}}else{if(w.m.g.mctype=="popwindow"){w.m.g.mc.style.height=w.m.g.prop.height+"px";w.m.g.mc.style.width=w.m.g.prop.width+"px";w.m.g.mc.style.top="-5000px";w.m.g.mc.style.left="-5000px"}}if(w.m.g.mctype!="none"){d.body.appendChild(w.m.g.mc)}var n=g[a1]("hotspots")[0][a1]("hotspot");for(var v=0;v<n.length;v++){var s=new w.m.hotspot();if(n[v][a5]("id")){s.id=n[v][a5]("id")}if(n[v][a5]("lat")){s.y=n[v][a5]("lat")}if(n[v][a5]("lng")){s.x=n[v][a5]("lng")}if(n[v][a5]("hint")){s.hint=n[v][a5]("hint")}if(n[v][a5]("common")){s.common=n[v][a5]("common").replace(/ /g,"%20")}if(n[v][a5]("hover")){s.hover=n[v][a5]("hover").replace(/ /g,"%20")}if(n[v][a5]("height")){s.height=parseInt(n[v][a5]("height"))}if(n[v][a5]("width")){s.width=parseInt(n[v][a5]("width"))}if(n[v][a5]("type")){s.type=n[v][a5]("type");if(s.type=="streetview"){s.pov={heading:parseFloat(n[v][a5]("heading")),pitch:parseFloat(n[v][a5]("pitch")),zoom:parseInt(n[v][a5]("zoom"))};s.panoid=n[v][a5]("panoid")}if(s.type=="poly"){s.area=JSONObject.parse(n[v][a5]("area"))}}s.clickActions=[];var e=n[v][a1]("actions")[0];var a=null;if(e){a=e[a1]("click")}if(a.length>0){for(var m=0;m<a.length;m++){var p={};s.clickActions.push(p);p.clickFunc=a[m][a5]("func");if(a[m][a5]("param")){p.clickParam=a[m][a5]("param")}var y=a[m][a1]("widget");if(y.length>0){p.clickParam={};for(var u=0;u<y.length;u++){w.wg.parse(y[u],s,m)}}}}w.m.g.hotspots.push(s)}var h=g[a1]("radars")[0][a1]("radar");for(var v=0;v<h.length;v++){var l=new w.rd.a();l.id=h[v][a5]("id");l.height=h[v][a5]("height");l.width=h[v][a5]("width");l.y=h[v][a5]("lat");l.x=h[v][a5]("lng");l.color=h[v][a5]("scancolor");l.common=h[v][a5]("common").replace(/ /g,"%20");l.hover=h[v][a5]("hover").replace(/ /g,"%20");l.type="google";l.sceneid=h[v][a5]("sceneid");l.initAngle=h[v][a5]("initAngle");l.initPan=h[v][a5]("pan");w.m.g.radars.push(l);l.clickFunc="changeScene";l.init()}q()}}if(A){var r=A[a1]("cmaps")[0][a1]("cmap");if(r.length){w.m.c.prop={};w.m.c.prop.height=parseInt(A[a5]("height"));w.m.c.prop.width=parseInt(A[a5]("width"));w.m.c.prop.top=parseInt(A[a5]("top"));w.m.c.prop.left=parseInt(A[a5]("left"));w.m.c.prop.bgcolor=A[a5]("bgcolor");w.m.c.prop.border=A[a5]("border");w.m.c.prop.opacity=parseInt(A[a5]("opacity"))/100;w.m.c.mctype=A[a5]("mctype");w.m.c.relativeposition=parseInt(A[a5]("relativeposition"));w.m.c.mc.style.position="absolute";if(A[a5]("zindex")){w.m.c.mc.style.zIndex=parseInt(A[a5]("zindex"))}if(w.m.c.mctype=="mainwindow"){if(w.twmode=="fullscreen"){if(w.m.c.relativeposition){w.m.c.mc.style.height=w.m.c.prop.height+"px";w.m.c.mc.style.width=w.m.c.prop.width+"px";w.m.c.mc.style.top=w.m.c.prop.top+"px";w.m.c.mc.style.left=w.m.c.prop.left+"px"}else{w.m.c.mc.style.height="100%";w.m.c.mc.style.width="100%";w.m.c.mc.style.top="0px";w.m.c.mc.style.left="0px"}}else{w.m.c.mc.style.height=w.m.c.prop.height+"px";w.m.c.mc.style.width=w.m.c.prop.width+"px";w.m.c.mc.style.top=w.m.c.prop.top+"px";w.m.c.mc.style.left=w.m.c.prop.left+"px"}}else{if(w.m.c.mctype=="popwindow"){w.m.c.mc.style.height="100%";w.m.c.mc.style.width="100%";w.m.c.mc.style.top="-5000px";w.m.c.mc.style.left="-5000px"}}if(w.m.c.mctype!="none"){d.body.appendChild(w.m.g.mc)}for(var v=0;v<r.length;v++){var f=new w.m.c.map();f.id=r[v][a5]("id");f.height=r[v][a5]("height");f.width=r[v][a5]("width");f.bgimage=r[v][a5]("uri").replace(/ /g,"%20");f.hotspots=[];f.radars=[];w.m.c.maps[f.id]=f;var b=r[v][a1]("hotspots")[0][a1]("hotspot");for(var u=0;u<b.length;u++){var c=new w.m.hotspot();c.id=b[u][a5]("id");c.left=b[u][a5]("pan");c.top=b[u][a5]("tilt");c.height=b[u][a5]("height");c.width=b[u][a5]("width");c.text=b[u][a5]("text");c.textpos=b[u][a5]("textalign");c.common=b[u][a5]("common").replace(/ /g,"%20");c.hover=b[u][a5]("hover").replace(/ /g,"%20");c.clickActions=[];if(b[u][a1]("actions")[0]){var B=b[u][a1]("actions")[0][a1]("click");if(B.length>0){for(var m=0;m<B.length;m++){var p={};c.clickActions.push(p);p.clickFunc=B[m][a5]("func");if(B[m][a5]("param")){p.clickParam=B[m][a5]("param")}var y=B[m][a1]("widget");if(y.length>0){p.clickParam={};for(var t=0;t<y.length;t++){w.wg.parse(y[t],c,m)}}}}}f.hotspots.push(c)}var x=r[v][a1]("radars")[0][a1]("radar");for(var u=0;u<x.length;u++){var C=new w.rd.a();C.id=x[u][a5]("id");C.height=x[u][a5]("height");C.width=x[u][a5]("width");C.type=r[v][a5]("id");C.y=x[u][a5]("top");C.x=x[u][a5]("left");C.color=x[u][a5]("scancolor");C.common=x[u][a5]("common").replace(/ /g,"%20");C.hover=x[u][a5]("hover").replace(/ /g,"%20");C.sceneid=x[u][a5]("sceneid");C.initAngle=x[u][a5]("initAngle");C.initPan=x[u][a5]("pan");C.clickFunc="changeScene";C.init()}}w.m.c.init()}}function q(){if(w.google){w.m.g.customLayer.prototype=new google.maps.OverlayView();w.m.g.customLayer.prototype.onAdd=function(){if(this.type){}else{var j=d[a2]("div");j.style.position="absolute";this.mc=j;if(this.radar){j[a3](this.radar.container)}if(this.hotspot){this.cv=d[a2]("canvas");this.cv.style.position="absolute";this.cv.style.top="0px";this.cv.style.left="0px";this.mc.appendChild(this.cv);if(this.hotspot.area.text){var i=this.hotspot.area.text;this.text=d[a2]("div");this.text.innerHTML=i.content;if(i.color){this.text.style.color=i.color}if(i.size){this.text.style.size=i.size}if(i.isBold!==undefined){if(i.isBold){this.text.style.fontWeight=700}}if(i.isItalic!==undefined){if(i.isItalic){this.text.style.fontStyle="italic"}}if(i.fontFamily){this.text.style.fontFamily=i.fontFamily}this.text.style.position="absolute";this.text.style.top="0px";this.text.style.left="0px";this.mc.appendChild(this.text)}}this.getPanes().floatPane[a3](j)}};w.m.g.customLayer.prototype.draw=function(){if(this.type){w.m.g.gref=this.getProjection()}else{var D=this.getProjection();var k=D.fromLatLngToDivPixel(this.position);if(this.radar){this.mc.style.height="100px";this.mc.style.width="100px";this.mc.style.top=(k.y-50)+"px";this.mc.style.left=(k.x-50)+"px"}if(this.hotspot){var F,L,z,I;var J=this.hotspot;for(var H=0;H<J.area.points.length;H++){var K=D.fromLatLngToDivPixel(new google.maps.LatLng(J.area.points[H].y,J.area.points[H].x));if(H==0){F=z=K.y;L=I=K.x}else{if(K.y<F){F=K.y}else{if(K.y>z){z=K.y}}if(K.x<L){L=K.x}else{if(K.x>I){I=K.x}}}}J.height=z-F;J.width=I-L;if(this.text){J.th=this.text[a8];J.tw=this.text[a9]}else{J.th=0;J.tw=0}this.mc.style.height=J.height+"px";this.mc.style.width=J.width+"px";this.mc.style.top=(k.y-Math.round(parseInt(J.height)/2))+"px";this.mc.style.left=(k.x-Math.round(parseInt(J.width)/2))+"px";var E=this.cv;E.style.cursor="pointer";E.height=J.height;E.width=J.width;if(this.hotspot.clickFunc){E.addEventListener("click",this.hotspot.clickFunc,false)}var G=E.getContext("2d");if(this.hotspot.area.lp){G.fillStyle.strokeStyle=this.hotspot.area.lp}else{G.fillStyle.strokeStyle="rgba(0,0,0,1)"}if(this.hotspot.area.pp){G.fillStyle=this.hotspot.area.pp}else{G.fillStyle="rgba(0,100,200,0.3)"}G.beginPath();if(this.hotspot.area.points){var K=D.fromLatLngToDivPixel(new google.maps.LatLng(this.hotspot.area.points[0].y,this.hotspot.area.points[0].x));G.moveTo(parseInt(K.x-(k.x-Math.round(parseInt(J.width)/2))),parseInt(K.y-(k.y-Math.round(parseInt(J.height)/2))))}for(var H=1;H<this.hotspot.area.points.length;H++){var j=D.fromLatLngToDivPixel(new google.maps.LatLng(this.hotspot.area.points[H].y,this.hotspot.area.points[H].x));G.lineTo(parseInt(j.x-(k.x-Math.round(parseInt(J.width)/2))),parseInt(j.y-(k.y-Math.round(parseInt(J.height)/2))));if(H==(this.hotspot.area.points.length-1)){var K=D.fromLatLngToDivPixel(new google.maps.LatLng(this.hotspot.area.points[0].y,this.hotspot.area.points[0].x));G.lineTo(parseInt(K.x-(k.x-Math.round(parseInt(J.width)/2))),parseInt(K.y-(k.y-Math.round(parseInt(J.height)/2))))}}G.fill();G.stroke();if(this.text){this.text.style.left=Math.round((this.mc.clientWidth-J.tw)/2)+"px";this.text.style.top=Math.round((this.mc.clientHeight-J.th)/2)+"px"}}}};w.m.g.init()}else{setTimeout(q,500)}}};w.ps.xml.e=function(h){if(h){h=h[a1]("button");for(var c=0;c<h.length;c++){var g=new w.b.a();g.id=h[c][a5]("id");g.type=h[c][a5]("type");g.zindex=h[c][a5]("zindex");g.height=parseInt(h[c][a5]("height"));g.width=parseInt(h[c][a5]("width"));g.top=parseInt(h[c][a5]("top"));g.left=parseInt(h[c][a5]("left"));g.relativeposition=parseInt(h[c][a5]("relativeposition"));g.isToggle=h[c][a5]("isToggle");g.common=h[c][a5]("common").replace(/ /g,"%20");g.opacity=parseInt(h[c][a5]("opacity"))/100;g.text=h[c][a5]("text");g.fontColor=h[c][a5]("fontcolor");g.fontFamily=h[c][a5]("fontfamily");g.fontSize=parseInt(h[c][a5]("fontsize"));if(h[c][a5]("isalign")=="true"){g.isAlign=true}else{g.isAlign=false}if(h[c][a5]("isbold")=="true"){g.isBold=true}else{g.isBold=false}if(h[c][a5]("isitalic")=="true"){g.isItalic=true}else{g.isItalic=false}g.hover=h[c][a5]("hover").replace(/ /g,"%20");g.clickActions=[];if(h[c][a1]("actions")[0]){var f=h[c][a1]("actions")[0][a1]("click");if(f.length>0){for(var k=0;k<f.length;k++){var e={};g.clickActions.push(e);e.clickFunc=f[k][a5]("func");if(f[k][a5]("param")){e.clickParam=f[k][a5]("param")}else{e.clickParam="{}"}var b=f[k][a1]("widget");if(b.length>0){e.clickParam={};for(var a=0;a<b.length;a++){w.wg.parse(b[a],g,k)}}}}}g.init();w.b.buttons.push(g)}}};w.ps.xml.f=function(l){var l=l[a1]("thumbnailo");for(var g=0;g<l.length;g++){var f=l[g];if(f[a5]("height")&&f[a5]("width")){var a={};a.id=f[a5]("id");a.type=f[a5]("type");a.height=f[a5]("height");a.width=f[a5]("width");a.zindex=f[a5]("zindex");if(f[a5]("ishorizontal")=="true"){a.isHorizontal=true}else{a.isHorizontal=false}if(f[a1]("leftNavigator").length>0&&f[a1]("leftNavigator")[0][a5]("height")&&f[a1]("rightNavigator").length>0&&f[a1]("rightNavigator")[0][a5]("height")){a.ln={};a.ln.height=parseInt(f[a1]("leftNavigator")[0][a5]("height"));a.ln.width=parseInt(f[a1]("leftNavigator")[0][a5]("width"));a.ln.url1=f[a1]("leftNavigator")[0][a5]("url1");a.ln.url2=f[a1]("leftNavigator")[0][a5]("url2");a.ln.url3=f[a1]("leftNavigator")[0][a5]("url3");a.rn={};a.rn.height=parseInt(f[a1]("rightNavigator")[0][a5]("height"));a.rn.width=parseInt(f[a1]("rightNavigator")[0][a5]("width"));a.rn.url1=f[a1]("rightNavigator")[0][a5]("url1");a.rn.url2=f[a1]("rightNavigator")[0][a5]("url2");a.rn.url3=f[a1]("rightNavigator")[0][a5]("url3")}a.mc={};var h=f[a1]("container")[0];a.mc.relativeposition=parseInt(f[a5]("relativeposition"));a.mc.height=parseInt(h[a5]("height"));a.mc.width=parseInt(h[a5]("width"));a.mc.top=parseInt(h[a5]("top"));a.mc.left=parseInt(h[a5]("left"));a.mc.bgcolor=h[a5]("bgcolor");a.border=h[a5]("border");a.mc.opacity=parseInt(h[a5]("opacity"))/100;a.mc.borderspace=parseInt(h[a5]("borderspace"));a.mc.cellspace=parseInt(h[a5]("cellspace"));a.thumbnails=[];var c=f[a1]("contents")[0][a1]("content");for(var e=0;e<c.length;e++){var n=c[e];var b={};b.margintop=parseInt(n[a5]("margintop"));b.marginleft=parseInt(n[a5]("marginleft"));b.height=parseInt(n[a5]("height"));b.width=parseInt(n[a5]("width"));b.imgheight=parseInt(n[a5]("imgheight"));b.imgwidth=parseInt(n[a5]("imgwidth"));b.bgcolor=(n[a5]("bgcolor"));b.url=(n[a5]("url"));b.sceneid=(n[a5]("sceneid"));b.common=(n[a5]("common"));b.hover=(n[a5]("hover"));var m=n[a1]("text");if(m.length>0){var o={};var k=m[0];o.content=k[a5]("content");o.color=k[a5]("color");o.fontsize=parseInt(k[a5]("fontsize"));o.fontfamily=k[a5]("fontfamily");if(k[a5]("isitalic")=="true"){o.isitalic=true}else{o.isitalic=false}if(k[a5]("isbold")=="true"){o.isbold=true}else{o.isbold=false}b.text=o}a.thumbnails.push(b)}new window.widget.thumbnail.instance(a)}}};w.ps.xml.tx=function(e){if(e){e=e.getElementsByTagName("twtext");for(var f=0;f<e.length;f++){var b=new w.text.a();var l=e[f];b.id=l[a5]("id");b.type=l[a5]("type");b.clickActions=[];b.height=parseInt(l[a5]("height"));b.width=parseInt(l[a5]("width"));b.zindex=l[a5]("zindex");b.top=parseInt(l[a5]("top"));b.left=parseInt(l[a5]("left"));b.text=l[a5]("text");if(l[a5]("iswrap")=="true"){b.isWrap=true}else{b.isWrap=false}if(l[a5]("isItalic")=="true"){b.isItalic=true}else{b.isItalic=false}if(l[a5]("isBold")=="true"){b.isBold=true}else{b.isBold=false}b.relativePosition=parseInt(l[a5]("relativeposition"));b.fontFamily=l[a5]("fontfamily");b.fontSize=l[a5]("fontsize");b.fontColor=l[a5]("fontcolor");b.textAlign=l[a5]("textalign");b.opacity=parseInt(l[a5]("opacity"))/100;b.underline=parseInt(l[a5]("underline"));b.common=l[a5]("commoncolor");b.hover=l[a5]("hovercolor");if(l[a1]("actions")[0]){var h=l[a1]("actions")[0][a1]("click");if(h.length>0){for(var g=0;g<h.length;g++){var k={};b.clickActions.push(k);k.clickFunc=h[g][a5]("func");if(h[g][a5]("param")){k.clickParam=h[g][a5]("param")}else{k.clickParam="{}"}var a=h[g][a1]("widget");if(a.length>0){k.clickParam={};for(var c=0;c<a.length;c++){w.wg.parse(a[c],b,g)}}}}}b.init()}}};w.ps.xml.txa=function(k){if(k){k=k.getElementsByTagName("twtextarea");for(var e=0;e<k.length;e++){var h=k[e];var b=new w.txa.a();b.id=h[a5]("id");b.type=h[a5]("type");b.relativePosition=parseInt(h[a5]("relativeposition"));b.top=parseInt(h[a5]("top"));b.left=parseInt(h[a5]("left"));b.height=parseInt(h[a5]("height"));b.width=parseInt(h[a5]("width"));b.zindex=h[a5]("zindex");b.opacity=parseInt(h[a5]("opacity"))/100;b.bgcolor=h[a5]("bgcolor");b.bordercolor=h[a5]("bordercolor");b.color=h[a5]("color");b.fontFamily=h[a5]("fontfamily");b.fontSize=h[a5]("fontsize");b.textAlign=h[a5]("textalign");if(h[a5]("isBold")=="true"){b.isBold=true}else{b.isBold=false}if(h[a5]("isItalic")=="true"){b.isItalic=true}else{b.isItalic=false}if(h[a5]("isWrap")=="true"){b.isWrap=true}else{b.isWrap=false}b.contents=[];var f=h.getElementsByTagName("content");for(var c=0;c<f.length;c++){var a=f[c];var g={};g.type=a[a5]("type");g.ctype=a[a5]("ctype");g.content=a[a5]("content");g.id=a[a5]("id");b.contents.push(g)}b.init()}}};w.ps.xml.img=function(e){if(e){e=e.getElementsByTagName("twimage");for(var f=0;f<e.length;f++){var l=e[f];var b=new w.img.a();b.id=l[a5]("id");b.type=l[a5]("type");b.relativePosition=parseInt(l[a5]("relativeposition"));b.top=parseInt(l[a5]("top"));b.left=parseInt(l[a5]("left"));b.height=parseInt(l[a5]("height"));b.width=parseInt(l[a5]("width"));b.zindex=l[a5]("zindex");b.opacity=parseInt(l[a5]("opacity"))/100;b.sizeMode=l[a5]("sizemode");if(l[a5]("iscenter")=="true"){b.isCenter=true}else{b.isCenter=false}b.src=l[a5]("url");b.clickActions=[];if(l[a1]("actions")[0]){var h=l[a1]("actions")[0][a1]("click");if(h.length>0){for(var g=0;g<h.length;g++){var k={};b.clickActions.push(k);k.clickFunc=h[g][a5]("func");if(h[g][a5]("param")){k.clickParam=h[g][a5]("param")}else{k.clickParam="{}"}var a=h[g][a1]("widget");if(a.length>0){k.clickParam={};for(var c=0;c<a.length;c++){w.wg.parse(a[c],b,g)}}}}}b.init()}}};w.ps.xml.g=function(e){var a={};if(w.wg.mv.scenes[e[a5]("name")]){a=w.wg.mv.scenes[e[a5]("name")]}else{w.wg.mv.scenes[e[a5]("name")]=a}if(e){for(var b=0;b<e.length;b++){var c={};if(e[b][a5]("duration")){c.duration=parseInt(e[b][a5]("duration"))}else{c.duration=60000}if(!isNaN(e[b][a5]("sp"))){c.sp=parseInt(e[b][a5]("sp"))}else{c.sp=0}if(!isNaN(e[b][a5]("ep"))){c.ep=parseInt(e[b][a5]("ep"))}else{c.ep=360}c.cp=c.sp;c.ps=(parseInt(c.ep)-parseInt(c.sp))/(parseInt(c.duration)/50);c.next=e[b][a5]("nextScene");a[e[b][a5]("id")]=c}}else{for(var b=0;b<w.gs.scenes.length;b++){var c={};c.duration=60000;c.sp=0;c.ep=360;c.cp=c.sp;c.ps=(360-0)/(60000/50);if((b+1)==w.gs.scenes.length){c.next=w.gs.scenes[0].id}else{c.next=w.gs.scenes[(b+1)].id}w.wg.mv.scenes[w.gs.scenes[b].id]=c}}};w.tw={};w.tw.playMovie=function(b,a){w.wg.mv.autoPlay(b,a)};w.tw.pauseMovie=function(){w.wg.mv.pausePlay()};w.tw.continueMovie=function(){w.wg.mv.continuePlay()};w.tw.stopMovie=function(a){w.wg.mv.stopPlay();if(a){a()}};w.tw.changeScene=function(a,b){var c=w.c.f(w.twmc);var e=document.getElementById("DivProcessBarCover").childNodes[0];if(e){e.style.top=(parseInt(c.top)+Math.round((b.properties.height.end-52)/2))+"px";e.style.left=(parseInt(c.left)+Math.round((b.properties.width.end-209)/2))+"px"}w.hs.e.changeScene({id:a.id})};w.tw.resizePlayer=function(){if(w.p.isInit){w.p.orz()}w.wg.rz()};w.tw.clearPlayer=function(){for(var a=0;a<6;a++){w.p.panel.cube[a].height=128;w.p.panel.cube[a].width=128}w.wg.pb.f=false;w.rd.b()};w.tw.popWindowButtons=[];